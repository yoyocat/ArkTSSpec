<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>17. Experimental Features &#8212; ArkTS Specification 1.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=039e1c02" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=def9ab29"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="18. Standard Library" href="18_stdlib.html" />
    <link rel="prev" title="16. Support for GUI Programming" href="16_gui.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="experimental-features">
<span id="id1"></span><h1><span class="section-number">17. </span>Experimental Features<a class="headerlink" href="#experimental-features" title="Permalink to this heading">¶</a></h1>
<p>This Chapter introduces the ArkTS features that are considered a part of
the language, but have no counterpart in TypeScript, and are therefore not
recommended to those in need of a single source code for TypeScript and ArkTS.</p>
<p>Some features introduced in this Chapter are still under discussion. They can
be removed from the final version of the ArkTS specification. Once a feature
introduced in this Chapter is approved and/or implemented, the corresponding
section is moved to the body of the specification as appropriate.</p>
<p>The <em>array creation</em> feature introduced in <a class="reference internal" href="#array-creation-expressions"><span class="std std-ref">Array Creation Expressions</span></a>
enables users to dynamically create objects of array type by using runtime
expressions that provide the array size. This is a useful addition to other
array-related features of the language, such as array literals.</p>
<p>The construct can also be used to create multi-dimensional arrays.</p>
<p>The feature <em>function and method overloading</em> is supported in many
(if not all) modern programming languages. Overloading functions/methods
is a practical and convenient way to write program actions that are similar
in logic but different in implementation.</p>
<p id="index-0">The ArkTS language supports (as an experimental feature at the moment) two
semantically and syntactically different implementations of overloading: the
TypeScript-like implementation, and that of other languages. See
<a class="reference internal" href="#function-and-method-overloading"><span class="std std-ref">Function and Method Overloading</span></a> for more details.</p>
<p>Section <a class="reference internal" href="#native-functions-and-methods"><span class="std std-ref">Native Functions and Methods</span></a> introduces practically important
and useful mechanisms for the inclusion of components written in other languages
into a program written in ArkTS.</p>
<p>Section <a class="reference internal" href="#final-classes-and-methods"><span class="std std-ref">Final Classes and Methods</span></a> discusses the well-known feature that
in many OOP languages provides a way to restrict class inheritance and method
overriding. Making a class <em>final</em> prohibits defining classes derived from it,
whereas making a method <em>final</em> prevents it from overriding in derived classes.</p>
<p>Section <a class="reference internal" href="#extension-functions"><span class="std std-ref">Extension Functions</span></a> defines the ability to extend a class or an
interface with new functionality without having to inherit from the class. This
feature can be used for GUI programming (<a class="reference internal" href="16_gui.html#support-for-gui-programming"><span class="std std-ref">Support for GUI Programming</span></a>).</p>
<p>Section <a class="reference internal" href="#enumeration-methods"><span class="std std-ref">Enumeration Methods</span></a> adds methods to declarations of the
enumeration types. Such methods can help in some kinds of manipulations
with <em>enums</em>.</p>
<p id="index-1">Section <a class="reference internal" href="#exceptions"><span class="std std-ref">Exceptions</span></a> discusses the powerful, commonly used mechanism for
the processing of various kinds of unexpected events and situations that break
the ‘ordinary’ program logic. There are constructs to raise (”<em>throw</em>”)
exceptions, “<em>catch</em>” them along the dynamic sequence of function calls, and
handle them. Some support for exceptions is also provided by the classes from
the standard library (see <a class="reference internal" href="18_stdlib.html#standard-library"><span class="std std-ref">Standard Library</span></a>).</p>
<p><strong>Note</strong>: The exceptions mechanism is sometimes deprecated for being too
time-consuming and unsafe. Some modern languages do not support the
exceptions mechanism as discussed in this section. That is why the expediency
of adding this feature to the language is still under discussion.</p>
<p>The ArkTS language supports writing concurrent applications in the form of
<em>coroutines</em> (see <a class="reference internal" href="#coroutines"><span class="std std-ref">Coroutines</span></a>) that allow executing functions
concurrently, while the <em>channels</em> through which the coroutines can produce
results are asynchronous.</p>
<p>There is a basic set of language constructs that support concurrency. A function
to be launched asynchronously is marked by adding the modifier <code class="docutils literal notranslate"><span class="pre">async</span></code>
to its declaration. In addition, any function—or lambda expression—can be
launched as a separate thread explicitly by using the launch expression.</p>
<p id="index-2">The <code class="docutils literal notranslate"><span class="pre">await</span></code> statement is introduced to synchronize functions launched as
threads. The generic class <code class="docutils literal notranslate"><span class="pre">Promise&lt;T&gt;</span></code> from the standard library (see
<a class="reference internal" href="18_stdlib.html#standard-library"><span class="std std-ref">Standard Library</span></a>) is used to exchange information between threads.
The class can be handled as an implementation of the channel mechanism.
The class provides a number of methods to manipulate the values produced
by threads.</p>
<p>Section <a class="reference internal" href="#packages"><span class="std std-ref">Packages</span></a> discusses a well-known and proven language feature
intended to organize large pieces of software that typically consist of many
components. <em>Packages</em> allow developers to construct a software product
as a composition of subsystems, and organize the development process in a way
that is appropriate for independent teams to work in parallel.</p>
<p id="index-3"><em>Package</em> is the language construct that combines a number of declarations,
and makes them parts of an independent compilation unit.</p>
<p>The <em>export</em> and <em>import</em> features are used to organize communication
between <em>packages</em>. An entity exported from one package becomes known to—
and accessible in—another package which imports that feature. Various
options are provided to simplify export/import, e.g., by defining
non-exported, i.e., ‘<em>internal</em>’ declarations that are not accessible from
the outside of the package.</p>
<p>In addition, ArkTS supports the <em>package</em> initialization semantics that
makes a <em>package</em> even more independent from the environment.</p>
<p>In addition to the notion of <em>generic constructs</em>, the <em>declaration-site
variance</em> feature is  considered. The idea of the feature is briefly
described below, and in greater detail in <a class="reference internal" href="#declaration-site-variance"><span class="std std-ref">Declaration-Site Variance</span></a>.</p>
<p id="index-4">Normally, two different argument types that specialize a generic class are
handled as different and unrelated types (<em>invariance</em>). ArkTS proposes
to extend the rule, and to allow such specializations become base classes and
derived classes (<em>covariance</em>), or vice versa (<em>contravariance</em>), depending on
the relationship of inheritance between argument types.</p>
<p>Special markers are used to specify the <em>declaration-site variance</em>.
The markers are to be added to generic parameter declarations.</p>
<p>The practices of some languages (e.g., Scala) have proven the usefulness of
this powerful mechanism. However, its practical application can be relatively
difficult. Therefore, the addition of this feature to the language
is still under consideration.</p>
<div class="line-block" id="index-5">
<div class="line"><br /></div>
</div>
<section id="character-type-and-literals">
<span id="id2"></span><h2><span class="section-number">17.1. </span>Character Type and Literals<a class="headerlink" href="#character-type-and-literals" title="Permalink to this heading">¶</a></h2>
<section id="character-literals">
<span id="id3"></span><h3><span class="section-number">17.1.1. </span>Character Literals<a class="headerlink" href="#character-literals" title="Permalink to this heading">¶</a></h3>
<p>A <em>char literal</em> represents the following:</p>
<ul class="simple">
<li><p>A value with a single character; or</p></li>
<li><p>A single escape sequence preceded by the characters ‘single quote’ (U+0027)
and ‘c’ (U+0063), and followed by a ‘single quote’ U+0027).</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-abnf notranslate"><div class="highlight"><pre><span></span><span class="nc">CharLiteral</span>:
<span class="w">    </span>&#39;<span class="nc">c</span>\&#39;&#39;<span class="w"> </span><span class="nc">SingleQuoteCharacter</span><span class="w"> </span>&#39;\&#39;&#39;
<span class="w">    </span><span class="c1">;</span>

<span class="nc">SingleQuoteCharacter</span>:
<span class="w">    </span>~<span class="p">[</span>&#39;\\\<span class="nc">r</span>\<span class="nc">n</span><span class="p">]</span>
<span class="w">    </span>|<span class="w"> </span>&#39;\\&#39;<span class="w"> </span><span class="nc">EscapeSequence</span>
<span class="w">    </span><span class="c1">;</span>
</pre></div>
</div>
<p>The examples are presented below:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="nx">c</span><span class="s1">&#39;a&#39;</span>
<span class="linenos">2</span><span class="w">   </span><span class="nx">c</span><span class="s1">&#39;\n&#39;</span>
<span class="linenos">3</span><span class="w">   </span><span class="nx">c</span><span class="s1">&#39;\x7F&#39;</span>
<span class="linenos">4</span><span class="w">   </span><span class="nx">c</span><span class="s1">&#39;\u0000&#39;</span>
</pre></div>
</div>
<p><em>Character Literals</em> are of type <em>char</em>.</p>
<div class="line-block" id="index-6">
<div class="line"><br /></div>
</div>
</section>
<section id="character-type-and-operations">
<span id="id4"></span><h3><span class="section-number">17.1.2. </span>Character Type and Operations<a class="headerlink" href="#character-type-and-operations" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Type’s Set of Values</p></th>
<th class="head"><p>Corresponding Class Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>char</em></p></td>
<td><p>Symbols with codes from U+0000
to U+FFFF inclusive, that is,
from 0 to 65,535</p></td>
<td><p><em>Char</em></p></td>
</tr>
</tbody>
</table>
<p>ArkTS provides a number of operators to act on character values as discussed
below.</p>
<ul class="simple">
<li><p>Comparison operators that produce a value of type <em>boolean</em>:</p>
<ul>
<li><p>Character comparison operators ‘&lt;’, ‘&lt;=’, ‘&gt;’, and ‘&gt;=’ (see <a class="reference internal" href="7_expressions.html#numerical-comparison-operators"><span class="std std-ref">Numerical Comparison Operators &lt;, &lt;=, &gt;, and &gt;=</span></a>);</p></li>
<li><p>Character equality operators ‘==’ and ‘!=’ (see <a class="reference internal" href="7_expressions.html#value-equality-for-characters"><span class="std std-ref">Value Equality for Characters</span></a>);</p></li>
</ul>
</li>
<li><p>Character operators that produce a value of type <em>char</em>;</p>
<ul>
<li><p>Unary plus ‘+’ and minus ‘-’ operators (see <a class="reference internal" href="7_expressions.html#unary-plus"><span class="std std-ref">Unary Plus</span></a> and <a class="reference internal" href="7_expressions.html#unary-minus"><span class="std std-ref">Unary Minus</span></a>);</p></li>
<li><p>Additive operators ‘+’ and ‘-’ (see <a class="reference internal" href="7_expressions.html#additive-expressions"><span class="std std-ref">Additive Expressions</span></a>);</p></li>
<li><p>Increment operator ‘++’ used as prefix (see <a class="reference internal" href="7_expressions.html#prefix-increment"><span class="std std-ref">Prefix Increment</span></a>) or
postfix (see <a class="reference internal" href="7_expressions.html#postfix-increment"><span class="std std-ref">Postfix Increment</span></a>);</p></li>
<li><p>Decrement operator ‘–’ used as prefix (see <a class="reference internal" href="7_expressions.html#prefix-decrement"><span class="std std-ref">Prefix Decrement</span></a>) or
postfix (see <a class="reference internal" href="7_expressions.html#postfix-decrement"><span class="std std-ref">Postfix Decrement</span></a>);</p></li>
</ul>
</li>
<li><p>Conditional operator ‘?:’ (see <a class="reference internal" href="7_expressions.html#conditional-expressions"><span class="std std-ref">Conditional Expressions</span></a>);</p></li>
<li><p>The string concatenation operator ‘+’ (see <a class="reference internal" href="7_expressions.html#string-concatenation"><span class="std std-ref">String Concatenation</span></a>) that,
if one operand is <code class="docutils literal notranslate"><span class="pre">string</span></code> and the other is <code class="docutils literal notranslate"><span class="pre">character</span></code>, converts the
character operand to a string, and then creates a concatenation of the
two strings as a new <code class="docutils literal notranslate"><span class="pre">string</span></code>.</p></li>
</ul>
<p>The class <em>Char</em> provides constructors, methods, and constants
that are parts of the ArkTS standard library (see <a class="reference internal" href="18_stdlib.html#standard-library"><span class="std std-ref">Standard Library</span></a>).</p>
<div class="line-block" id="index-7">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="array-creation-expressions">
<span id="id5"></span><h2><span class="section-number">17.2. </span>Array Creation Expressions<a class="headerlink" href="#array-creation-expressions" title="Permalink to this heading">¶</a></h2>
<p>An <em>array creation expression</em> creates new objects that are instances of arrays.
The <em>array literal</em> expression is used to create an array instance, and to
provide some initial values (see <a class="reference internal" href="7_expressions.html#array-literal"><span class="std std-ref">Array Literal</span></a>).</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="nx">newArrayInstance</span><span class="o">:</span>
<span class="linenos">2</span><span class="w">       </span><span class="s1">&#39;new&#39;</span><span class="w"> </span><span class="nx">typeReference</span><span class="w"> </span><span class="nx">dimensionExpression</span><span class="o">+</span>
<span class="linenos">3</span><span class="w">       </span><span class="p">;</span>
<span class="linenos">4</span>
<span class="linenos">5</span><span class="w">   </span><span class="nx">dimensionExpression</span><span class="o">:</span>
<span class="linenos">6</span><span class="w">       </span><span class="s1">&#39;[&#39;</span><span class="w"> </span><span class="nx">expression</span><span class="w"> </span><span class="s1">&#39;]&#39;</span>
<span class="linenos">7</span><span class="w">       </span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="kt">number</span><span class="p">[</span><span class="mf">2</span><span class="p">][</span><span class="mf">2</span><span class="p">]</span><span class="w"> </span><span class="c1">// create 2x2 matrix</span>
</pre></div>
</div>
<p>An <em>array creation expression</em> creates an object that is a new array with the
elements of the type specified by <em>typeReference</em>.</p>
<p>The type of each <em>dimensionExpression</em> must be convertible (see
<a class="reference internal" href="6_conversions.html#primitive-types-conversions"><span class="std std-ref">Primitive Types Conversions</span></a>) to an integer type. Otherwise,
a <span class="target" id="index-8"></span>compile-time error occurs.</p>
<p>A numeric conversion (see <a class="reference internal" href="6_conversions.html#primitive-types-conversions"><span class="std std-ref">Primitive Types Conversions</span></a>) is
performed on each <em>dimensionExpression</em> to ensure that the resultant type
is <em>int</em>. Otherwise, <span class="target" id="index-9"></span>compile-time error occurs.</p>
<p>A <span class="target" id="index-10"></span>compile-time error occurs if any <em>dimensionExpression</em> is a
constant expression that is evaluated at compile time to a negative integer
value.</p>
<p>If the type of any <em>dimensionExpression</em> is number or other floating-point
type, and its fractional part is different from 0, then errors occur as
follows:</p>
<ul class="simple">
<li><p>Runtime error, if the situation is identified during program execution; and</p></li>
<li><p>Compile-time error, if the situation is detected during compilation.</p></li>
</ul>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="kt">number</span><span class="p">[</span><span class="o">-</span><span class="mf">3</span><span class="p">]</span><span class="w"> </span><span class="c1">// compile-time error</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="kt">number</span><span class="p">[</span><span class="mf">3.141592653589</span><span class="p">]</span><span class="w">  </span><span class="c1">// compile-time error</span>
<span class="linenos">4</span>
<span class="linenos">5</span><span class="w">   </span><span class="nx">foo</span><span class="w"> </span><span class="p">(</span><span class="mf">3.141592653589</span><span class="p">)</span>
<span class="linenos">6</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">foo</span><span class="w"> </span><span class="p">(</span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">7</span><span class="w">      </span><span class="kd">let</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="kt">number</span><span class="p">[</span><span class="nx">size</span><span class="p">]</span><span class="w">  </span><span class="c1">// runtime error</span>
<span class="linenos">8</span><span class="w">   </span><span class="p">}</span>
</pre></div>
</div>
<p>A <span class="target" id="index-11"></span>compile-time error occurs if <em>typeReference</em> refers to a class
that does not contain an accessible parameterless constructor or constructor
with all parameters of the second form of optional parameters
(see <a class="reference internal" href="4_names.html#optional-parameters"><span class="std std-ref">Optional Parameters</span></a>), or if <em>typeReference</em> has no a default value:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="kt">string</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="w"> </span><span class="c1">// compile-time error: string has no default value</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">4</span><span class="w">      </span><span class="kr">constructor</span><span class="w"> </span><span class="p">(</span><span class="nx">p1?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="nx">p2?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<span class="linenos">5</span><span class="w">   </span><span class="p">}</span>
<span class="linenos">6</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">A</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span><span class="w"> </span><span class="c1">// OK, as all 3 elements of array will be filled with</span>
<span class="linenos">7</span><span class="w">   </span><span class="c1">// new A() objects</span>
</pre></div>
</div>
<div class="line-block" id="index-12">
<div class="line"><br /></div>
</div>
<section id="runtime-evaluation-of-array-creation-expressions">
<span id="id6"></span><h3><span class="section-number">17.2.1. </span>Runtime Evaluation of Array Creation Expressions<a class="headerlink" href="#runtime-evaluation-of-array-creation-expressions" title="Permalink to this heading">¶</a></h3>
<p>The evaluation of an array creation expression at runtime is performed
as follows:</p>
<ol class="arabic simple">
<li><p>The dimension expressions are evaluated. The evaluation is performed
left-to-right; if any expression evaluation completes abruptly, then
the expressions to the right of it are not evaluated.</p></li>
<li><p>The values of dimension expressions are checked. If the value of any
<em>dimExpr</em> expression is less than zero, then <em>NegativeArraySizeException</em>
is thrown.</p></li>
<li><p>Space for the new array is allocated. If the available space is not
sufficient to allocate the array, then <em>OutOfMemoryError</em> is thrown,
and the evaluation of the array creation expression completes abruptly.</p></li>
<li><p>When a one-dimensional array is created, each element of that array
is initialized to its default value if the type default value is defined
(<a class="reference internal" href="3_types.html#default-values-for-types"><span class="std std-ref">Default Values for Types</span></a>).
If the default value for an element type is not defined, but the element
type is a class type, then its <em>parameterless</em> constructor is used to
create the value of each element.</p></li>
<li><p>When a multi-dimensional array is created, the array creation effectively
executes a set of nested loops of depth <em>n-1</em>, and creates an implied
array of arrays.</p></li>
</ol>
<div class="line-block" id="index-13">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="indexable-types">
<span id="id7"></span><h2><span class="section-number">17.3. </span>Indexable Types<a class="headerlink" href="#indexable-types" title="Permalink to this heading">¶</a></h2>
<p>If a class or an interface declares one or two functions with names <em>$_get</em> and
<em>$_set</em>, and signatures <em>(index: Type1): Type2</em> and <em>(index: Type1, value: Type2)</em>
respectively, then an indexing expression (see <a class="reference internal" href="7_expressions.html#indexing-expression"><span class="std std-ref">Indexing Expression</span></a>) can
be applied to variables of such types:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">SomeClass</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">2</span><span class="w">    </span><span class="nx">$_get</span><span class="w"> </span><span class="p">(</span><span class="nx">index</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">SomeClass</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">3</span><span class="w">    </span><span class="nx">$_set</span><span class="w"> </span><span class="p">(</span><span class="nx">index</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="kt">SomeClass</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">4</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">5</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">SomeClass</span>
<span class="linenos">6</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">x</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="c1">// This notation implies a call: x = x.$_get (1)</span>
<span class="linenos">7</span><span class="w"> </span><span class="nx">x</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="c1">// This notation implies a call: x.$_set (1, x)</span>
</pre></div>
</div>
<p>If only one function is present, then only the appropriate form of the index
expression (see <a class="reference internal" href="7_expressions.html#indexing-expression"><span class="std std-ref">Indexing Expression</span></a>) is available:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">ClassWithGet</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">    </span><span class="nx">$_get</span><span class="w"> </span><span class="p">(</span><span class="nx">index</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">ClassWithGet</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="p">}</span>
<span class="linenos"> 3</span><span class="w"> </span><span class="p">}</span>
<span class="linenos"> 4</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nx">getClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ClassWithGet</span>
<span class="linenos"> 5</span><span class="w"> </span><span class="nx">getClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">getClass</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span>
<span class="linenos"> 6</span><span class="w"> </span><span class="nx">getClass</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">getClass</span><span class="w"> </span><span class="c1">// Error - no $_set function available</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">ClassWithSet</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">10</span><span class="w">    </span><span class="nx">$_set</span><span class="w"> </span><span class="p">(</span><span class="nx">index</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="kt">ClassWithSet</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">11</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">12</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nx">setClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ClassWithSet</span>
<span class="linenos">13</span><span class="w"> </span><span class="nx">setClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">setClass</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="w"> </span><span class="c1">// Error - no $_get function available</span>
<span class="linenos">14</span><span class="w"> </span><span class="nx">setClass</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">setClass</span>
</pre></div>
</div>
<p>Type <em>string</em> can be used as a type of the index parameter:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">SomeClass</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">2</span><span class="w">    </span><span class="nx">$_get</span><span class="w"> </span><span class="p">(</span><span class="nx">index</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">SomeClass</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">3</span><span class="w">    </span><span class="nx">$_set</span><span class="w"> </span><span class="p">(</span><span class="nx">index</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="kt">SomeClass</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">4</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">5</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">SomeClass</span>
<span class="linenos">6</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">x</span><span class="p">[</span><span class="s2">&quot;index string&quot;</span><span class="p">]</span>
<span class="linenos">7</span><span class="w">    </span><span class="c1">// This notation implies a call: x = x.$_get (&quot;index string&quot;)</span>
<span class="linenos">8</span><span class="w"> </span><span class="nx">x</span><span class="p">[</span><span class="s2">&quot;index string&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">x</span>
<span class="linenos">9</span><span class="w">    </span><span class="c1">// This notation implies a call: x.$_set (&quot;index string&quot;, x)</span>
</pre></div>
</div>
<p>Functions <em>$_get</em> and <em>$_set</em> are ordinary functions with compiler-known
signatures. The functions can be used like any other function.
The functions can be abstract or defined in an interface and implemented later.
The functions can be overridden and provide a dynamic dispatch for the indexing
expression evaluation (see <a class="reference internal" href="7_expressions.html#indexing-expression"><span class="std std-ref">Indexing Expression</span></a>). They can be used in
generic classes and interfaces for better flexibility.</p>
<p>A compile-time error occurs if these functions are marked as <em>async</em>.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">ReadonlyIndexable</span><span class="o">&lt;</span><span class="nx">K</span><span class="p">,</span><span class="w"> </span><span class="nx">V</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">    </span><span class="nx">$_get</span><span class="w"> </span><span class="p">(</span><span class="nx">index</span><span class="o">:</span><span class="w"> </span><span class="kt">K</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">V</span>
<span class="linenos"> 3</span><span class="w"> </span><span class="p">}</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">Indexable</span><span class="o">&lt;</span><span class="nx">K</span><span class="p">,</span><span class="w"> </span><span class="nx">V</span><span class="o">&gt;</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">ReadonlyIndexable</span><span class="o">&lt;</span><span class="nx">K</span><span class="p">,</span><span class="w"> </span><span class="nx">V</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 6</span><span class="w">    </span><span class="nx">$_set</span><span class="w"> </span><span class="p">(</span><span class="nx">index</span><span class="o">:</span><span class="w"> </span><span class="kt">K</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="kt">V</span><span class="p">)</span>
<span class="linenos"> 7</span><span class="w"> </span><span class="p">}</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">IndexableByNumber</span><span class="o">&lt;</span><span class="nx">V</span><span class="o">&gt;</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Indexable</span><span class="o">&lt;</span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="nx">V</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">10</span><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">V</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="linenos">11</span><span class="w">    </span><span class="nx">$_get</span><span class="w"> </span><span class="p">(</span><span class="nx">index</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">V</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="w"> </span><span class="p">[</span><span class="nx">index</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">12</span><span class="w">    </span><span class="nx">$_set</span><span class="w"> </span><span class="p">(</span><span class="nx">index</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="kt">V</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">13</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">IndexableByString</span><span class="o">&lt;</span><span class="nx">V</span><span class="o">&gt;</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Indexable</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">V</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">16</span><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Map</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">V</span><span class="o">&gt;</span>
<span class="linenos">17</span><span class="w">    </span><span class="nx">$_get</span><span class="w"> </span><span class="p">(</span><span class="nx">index</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">V</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="w"> </span><span class="p">[</span><span class="nx">index</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">18</span><span class="w">    </span><span class="nx">$_set</span><span class="w"> </span><span class="p">(</span><span class="nx">index</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="kt">V</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">19</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">BadClass</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">IndexableByNumber</span><span class="o">&lt;</span><span class="kt">boolean</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">22</span><span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="nx">$_set</span><span class="w"> </span><span class="p">(</span><span class="nx">index</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">index</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">23</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">IndexableByNumber</span><span class="o">&lt;</span><span class="kt">boolean</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">BadClass</span>
<span class="linenos">26</span><span class="w"> </span><span class="nx">x</span><span class="p">[</span><span class="mf">666</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">// This will be dispatched at runtime to the overridden</span>
<span class="linenos">27</span><span class="w">    </span><span class="c1">// version of the $_set method</span>
<span class="linenos">28</span><span class="w"> </span><span class="nx">x</span><span class="p">.</span><span class="nx">$_get</span><span class="w"> </span><span class="p">(</span><span class="mf">15</span><span class="p">)</span><span class="w">  </span><span class="c1">// $_get and $_set can be called as ordinary</span>
<span class="linenos">29</span><span class="w">    </span><span class="c1">// methods</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="iterable-types">
<span id="id8"></span><h2><span class="section-number">17.4. </span>Iterable Types<a class="headerlink" href="#iterable-types" title="Permalink to this heading">¶</a></h2>
<p>A class or an interface can be made <em>iterable</em>, meaning that their instances
can be used in <code class="docutils literal notranslate"><span class="pre">for-of</span></code> statements (see <a class="reference internal" href="8_statements.html#for-of-statements"><span class="std std-ref">for-of Statements</span></a>).</p>
<p>A type is <em>iterable</em> if it declares a parameterless function with name
<em>$_iterator</em> and signature <em>(): ITER</em>, where <em>ITER</em> is a type that implements
<em>Iterator</em> interface defined in the standard library (see <a class="reference internal" href="18_stdlib.html#standard-library"><span class="std std-ref">Standard Library</span></a>).</p>
<p>The example below defines <em>iterable</em> class <em>C</em>:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">C</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">     </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;c&#39;</span><span class="p">]</span>
<span class="linenos"> 3</span><span class="w">     </span><span class="nx">$_iterator</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 4</span><span class="w">       </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">CIterator</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
<span class="linenos"> 5</span><span class="w">     </span><span class="p">}</span>
<span class="linenos"> 6</span><span class="w">   </span><span class="p">}</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">CIterator</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">Iterator</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 9</span><span class="w">     </span><span class="nx">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span>
<span class="linenos">10</span><span class="w">     </span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="kt">C</span>
<span class="linenos">11</span><span class="w">     </span><span class="kr">constructor</span><span class="w"> </span><span class="p">(</span><span class="nx">base</span><span class="o">:</span><span class="w"> </span><span class="kt">C</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">12</span><span class="w">       </span><span class="k">this</span><span class="p">.</span><span class="nx">base</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">base</span>
<span class="linenos">13</span><span class="w">     </span><span class="p">}</span>
<span class="linenos">14</span><span class="w">     </span><span class="nx">next</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">IteratorResult</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">15</span><span class="w">       </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">16</span><span class="w">         </span><span class="nx">done</span><span class="o">:</span><span class="w"> </span><span class="kt">this.index</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">base</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
<span class="linenos">17</span><span class="w">         </span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="kt">this.base.data</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span>
<span class="linenos">18</span><span class="w">       </span><span class="p">}</span>
<span class="linenos">19</span><span class="w">     </span><span class="p">}</span>
<span class="linenos">20</span><span class="w">   </span><span class="p">}</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">C</span><span class="p">()</span>
<span class="linenos">23</span><span class="w">   </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">24</span><span class="w">         </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
<span class="linenos">25</span><span class="w">       </span><span class="p">}</span>
</pre></div>
</div>
<p>In the example above, class <em>C</em> function <em>$_iterator</em> returns
<em>CIterator&lt;string&gt;</em>, which implements <em>Iterator&lt;string&gt;</em>. If executed,
this code prints out the following:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;a&quot;</span>
<span class="s2">&quot;b&quot;</span>
<span class="s2">&quot;c&quot;</span>
</pre></div>
</div>
<p>The function <em>$_iterator</em> is an ordinary function with a compiler-known
signature. The function can be used like any other function. It can be
abstract or defined in an interface to be implemented later.</p>
<p>A compile-time error occurs if this function is marked as <em>async</em>.</p>
<p><strong>Note</strong>: To support the code compatible with TypeScript, the name of the function
<em>$_iterator</em> can be written as [<em>Symbol.iterator</em>]. In this case, the class
<em>iterable</em> looks as follows:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">C</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">2</span><span class="w">     </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;c&#39;</span><span class="p">];</span>
<span class="linenos">3</span><span class="w">     </span><span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">iterator</span><span class="p">]()</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">4</span><span class="w">       </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">CIterator</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
<span class="linenos">5</span><span class="w">     </span><span class="p">}</span>
<span class="linenos">6</span><span class="w">   </span><span class="p">}</span>
</pre></div>
</div>
<p>The use of the name [<em>Symbol.iterator</em>] is considered deprecated.
It can be removed in the future versions of the language.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="statements">
<span id="statements-experimental"></span><h2><span class="section-number">17.5. </span>Statements<a class="headerlink" href="#statements" title="Permalink to this heading">¶</a></h2>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="for-of-type-annotation">
<span id="id9"></span><h3><span class="section-number">17.5.1. </span>For-of Type Annotation<a class="headerlink" href="#for-of-type-annotation" title="Permalink to this heading">¶</a></h3>
<p>An explicit type annotation is allowed for a <em>for variable</em>:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="c1">// explicit type is used for a new variable,</span>
<span class="linenos">2</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">]</span>
<span class="linenos">3</span><span class="w">   </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">n</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">4</span><span class="w">     </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span>
<span class="linenos">5</span><span class="w">   </span><span class="p">}</span>
</pre></div>
</div>
<div class="line-block" id="index-14">
<div class="line"><br /></div>
</div>
</section>
<section id="multiple-catch-clauses-in-try-statements">
<span id="id10"></span><h3><span class="section-number">17.5.2. </span>Multiple Catch Clauses in Try Statements<a class="headerlink" href="#multiple-catch-clauses-in-try-statements" title="Permalink to this heading">¶</a></h3>
<p>When an exception or an error is thrown in the <code class="docutils literal notranslate"><span class="pre">try</span></code> block, or in a <em>throwing</em>
or <em>rethrowing</em> function (see <a class="reference internal" href="#throwing-functions"><span class="std std-ref">Throwing Functions</span></a> and
<a class="reference internal" href="#rethrowing-functions"><span class="std std-ref">Rethrowing Functions</span></a>) called from the <code class="docutils literal notranslate"><span class="pre">try</span></code> block, the control is
transferred to the first ‘<code class="docutils literal notranslate"><span class="pre">catch</span></code>’ clause if the statement has at least one
‘<code class="docutils literal notranslate"><span class="pre">catch</span></code>’ clause that can catch that exception or error. If no ‘<code class="docutils literal notranslate"><span class="pre">catch</span></code>’
clause is found, then <em>exception</em> or <em>error</em> is propagated to the surrounding
scope.</p>
<p><strong>Note</strong>: An exception handled within a <em>non-throwing</em> function (see
<a class="reference internal" href="#non-throwing-functions"><span class="std std-ref">Non-Throwing Functions</span></a>) is never propagated outside that function.</p>
<p>A <em>catch</em> clause has two parts:</p>
<ul class="simple">
<li><p>An exception parameter that provides access to the object associated
with the exception or the error occurred; and</p></li>
<li><p>A block of code that is to handle the situation.</p></li>
</ul>
<p id="index-15"><em>Default catch clause</em> is a ‘<code class="docutils literal notranslate"><span class="pre">catch</span></code>’ clause with the exception parameter type
omitted. Such a ‘<code class="docutils literal notranslate"><span class="pre">catch</span></code>’ clause handles any exception or error that is not
handled by any previous clause. The type of that parameter is of the class
<em>Object</em>.</p>
<p>A <span class="target" id="index-16"></span>compile-time error occurs if:</p>
<ul class="simple">
<li><p>The default ‘<code class="docutils literal notranslate"><span class="pre">catch</span></code>’ clause is not the last ‘<code class="docutils literal notranslate"><span class="pre">catch</span></code>’ clause in a
<code class="docutils literal notranslate"><span class="pre">try</span></code> statement.</p></li>
<li><p>The type reference of an exception parameter (if any) is neither the
class <em>Exception</em> or <em>Error</em>, nor a class derived from <em>Exception</em> or
<em>Error</em>.</p></li>
</ul>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">ZeroDivisor</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Exception</span><span class="w"> </span><span class="p">{}</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">divide</span><span class="p">(</span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kr">int</span><span class="w"> </span><span class="kr">throws</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 4</span><span class="w">     </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">b</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ZeroDivisor</span><span class="p">()</span>
<span class="linenos"> 5</span><span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">b</span>
<span class="linenos"> 6</span><span class="w">   </span><span class="p">}</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">process</span><span class="p">(</span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="kt">int</span><span class="p">;</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kr">int</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 9</span><span class="w">     </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">10</span><span class="w">       </span><span class="kd">let</span><span class="w"> </span><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">divide</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="w">       </span><span class="c1">// further processing ...</span>
<span class="linenos">13</span><span class="w">     </span><span class="p">}</span>
<span class="linenos">14</span><span class="w">     </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">d</span><span class="o">:</span><span class="w"> </span><span class="kt">ZeroDivisor</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">MaxInt</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">15</span><span class="w">     </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">16</span><span class="w">   </span><span class="p">}</span>
</pre></div>
</div>
<p id="index-17">All exceptions that the <code class="docutils literal notranslate"><span class="pre">try</span></code> block can throw are caught by the function
‘process’. Special handling is provided for the <em>ZeroDivisor</em> exception,
and the handling of other <em>exceptions</em> and <em>errors</em> is different.</p>
<p><cite>‘’Catch’’</cite> clauses do not handle every possible <em>exception</em> or <em>error</em>
that can be thrown by the code in the <code class="docutils literal notranslate"><span class="pre">try</span></code> block. If no ‘<code class="docutils literal notranslate"><span class="pre">catch</span></code>’ clause
can handle the situation, then <em>exception</em> or <em>error</em> is propagated to
the surrounding scope.</p>
<p><strong>Note</strong>: If a <code class="docutils literal notranslate"><span class="pre">try</span></code> statement (<em>default catch clause</em>) is placed inside a
<em>non-throwing</em> function (see <a class="reference internal" href="#non-throwing-functions"><span class="std std-ref">Non-Throwing Functions</span></a>), then <em>exception</em>
is never propagated.</p>
<p id="index-18">If a ‘<code class="docutils literal notranslate"><span class="pre">catch</span></code>’ clause contains a block that corresponds to a parameter of the
<em>error</em>’, then it can only handle that <em>error</em>.</p>
<p>The type of the ‘<code class="docutils literal notranslate"><span class="pre">catch</span></code>’ clause parameter in a <em>default catch clause</em> is
omitted. The ‘<code class="docutils literal notranslate"><span class="pre">catch</span></code>’ clause can handle any <em>exceptions</em> or <em>errors</em>
unhandled by the previous clauses.</p>
<p>The type of a ‘<code class="docutils literal notranslate"><span class="pre">catch</span></code>’ clause parameter (if any) must be of the class
<em>Error</em> or <em>Exception</em>, or of another class derived from <em>Exception</em> or <em>Error</em>.</p>
<div class="highlight-typescript notranslate" id="index-19"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">     </span><span class="kd">function</span><span class="w"> </span><span class="nx">process</span><span class="p">(</span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="kt">int</span><span class="p">;</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kr">int</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">2</span><span class="w">     </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">3</span><span class="w">       </span><span class="k">return</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">b</span>
<span class="linenos">4</span><span class="w">     </span><span class="p">}</span>
<span class="linenos">5</span><span class="w">     </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">DivideByZeroError</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">MaxInt</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">6</span><span class="w">   </span><span class="p">}</span>
</pre></div>
</div>
<p>A ‘<code class="docutils literal notranslate"><span class="pre">catch</span></code>’ clause handles the <em>DivideByZeroError</em> at runtime. Other errors
are propagated to the surrounding scope if no ‘<code class="docutils literal notranslate"><span class="pre">catch</span></code>’ clause is found.</p>
<div class="line-block" id="index-20">
<div class="line"><br /></div>
</div>
</section>
<section id="assert-statements">
<span id="assert-statements-experimental"></span><h3><span class="section-number">17.5.3. </span><code class="docutils literal notranslate"><span class="pre">Assert</span></code> Statements<a class="headerlink" href="#assert-statements" title="Permalink to this heading">¶</a></h3>
<p>An <code class="docutils literal notranslate"><span class="pre">assert</span></code> statement can have one or two expressions. The first expression
is of type <em>boolean</em>; the optional second expression is of type <em>string</em>. A
<span class="target" id="index-21"></span>compile-time error occurs if the types of the expressions fail to match.</p>
<div class="highlight-abnf notranslate"><div class="highlight"><pre><span></span><span class="nc">assertStatement</span>:
<span class="w">    </span>&#39;<span class="nc">assert</span>&#39;<span class="w"> </span><span class="nc">expression</span><span class="w"> </span><span class="p">(</span>&#39;:&#39;<span class="w"> </span><span class="nc">expression</span><span class="p">)</span>?
<span class="w">    </span><span class="c1">;</span>
</pre></div>
</div>
<p><em>Assertions</em> control mechanisms that are not part of ArkTS, yet the
language allows having assertions either <em>enabled</em> or <em>disabled</em>.</p>
<p id="index-22">The execution of the <em>enabled</em> assertion starts from the evaluation of the
<em>boolean</em> expression. An error is thrown if the expression evaluates to
<code class="docutils literal notranslate"><span class="pre">false</span></code>. The second expression is then evaluated (if provided). Its
value passes as the <em>error</em> argument.</p>
<p>The execution of the <em>disabled</em> assertion has no effect whatsoever.</p>
<div class="highlight-typescript notranslate" id="index-23"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="nx">assert</span><span class="w"> </span><span class="nx">p</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span>
<span class="linenos">2</span><span class="w">   </span><span class="nx">assert</span><span class="w"> </span><span class="nx">f</span><span class="p">.</span><span class="nx">IsOpened</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;file must be opened&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">filename</span>
<span class="linenos">3</span><span class="w">   </span><span class="nx">assert</span><span class="w"> </span><span class="nx">f</span><span class="p">.</span><span class="nx">IsOpened</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">makeReportMessage</span><span class="p">()</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="function-and-method-overloading">
<span id="id11"></span><h2><span class="section-number">17.6. </span>Function and Method Overloading<a class="headerlink" href="#function-and-method-overloading" title="Permalink to this heading">¶</a></h2>
<p>Like the TypeScript language, ArkTS supports overload signatures that allow
specifying several headers for a function or method with different signatures.
Most other languages support a different form of overloading that specifies
a separate body for each overloaded header.</p>
<p>Both approaches have their advantages and disadvantages. The experimental
approach of ArkTS allows for improved performance as a specific body
is executed at runtime.</p>
<div class="line-block" id="index-24">
<div class="line"><br /></div>
</div>
<section id="function-overloading">
<span id="id12"></span><h3><span class="section-number">17.6.1. </span>Function Overloading<a class="headerlink" href="#function-overloading" title="Permalink to this heading">¶</a></h3>
<p>If a declaration scope declares two functions with the same name but
different signatures that are not <em>override-equivalent</em> (see
<a class="reference internal" href="15_semantics.html#override-equivalent-signatures"><span class="std std-ref">Override-Equivalent Signatures</span></a>), then the function name is <em>overloaded</em>.
An overloaded function name causes no compile-time error on its own.</p>
<p>No specific relationship is required between the return types, or between the
‘<code class="docutils literal notranslate"><span class="pre">throws</span></code>’ clauses of the two functions with the same name but different
signatures that are not <em>override-equivalent</em>.</p>
<p>When calling a function, the number of actual arguments (and any explicit type
arguments) and compile-time types of arguments is used at compile time to
determine the signature of the function being called (see
<a class="reference internal" href="7_expressions.html#function-call-expression"><span class="std std-ref">Function Call Expression</span></a>).</p>
<div class="line-block" id="index-25">
<div class="line"><br /></div>
</div>
</section>
<section id="class-method-overloading">
<span id="id13"></span><h3><span class="section-number">17.6.2. </span>Class Method Overloading<a class="headerlink" href="#class-method-overloading" title="Permalink to this heading">¶</a></h3>
<p>If two methods within a class have the same name, and their signatures are not
<em>override-equivalent</em>, then the methods name is considered <em>overloaded</em>.</p>
<p>An <em>overloaded</em> method name cannot cause a <span class="target" id="index-26"></span>compile-time error
on its own.</p>
<p>If the signatures of two methods with the same name are not <em>override-equivalent</em>,
then the return types of those methods, or the ‘<code class="docutils literal notranslate"><span class="pre">throws</span></code>’ or ‘<code class="docutils literal notranslate"><span class="pre">rethrows</span></code>’
clauses of those methods can have any kind of relationship.</p>
<p>A number of actual arguments, explicit type arguments, and compile-time types
of the arguments is used at compile time to determine the signature of the
method being called (see <a class="reference internal" href="7_expressions.html#method-call-expression"><span class="std std-ref">Method Call Expression</span></a>, and
<a class="reference internal" href="7_expressions.html#step-2-selection-of-method"><span class="std std-ref">Step 2: Selection of Method</span></a>).</p>
<p>In the case of an instance method, the actual method being called is determined
at runtime by using the dynamic method lookup (see <a class="reference internal" href="7_expressions.html#method-call-expression"><span class="std std-ref">Method Call Expression</span></a>)
provided by the runtime system.</p>
<div class="line-block" id="index-27">
<div class="line"><br /></div>
</div>
</section>
<section id="interface-method-overloading">
<span id="id14"></span><h3><span class="section-number">17.6.3. </span>Interface Method Overloading<a class="headerlink" href="#interface-method-overloading" title="Permalink to this heading">¶</a></h3>
<p>If two methods of an interface (declared or inherited in any combination)
have the same name but different signatures that are not <em>override-equivalent</em>
(see <a class="reference internal" href="9_classes.html#inheriting-methods-with-override-equivalent-signatures"><span class="std std-ref">Inheriting Methods with Override-Equivalent Signatures</span></a>), then
such method name is considered <em>overloaded</em>.</p>
<p>However, this causes no <span class="target" id="index-28"></span>compile-time error on its own, because no
specific relationship is required between the return types, or between the
‘<code class="docutils literal notranslate"><span class="pre">throws</span></code>’ clauses of the two methods.</p>
<div class="line-block" id="index-29">
<div class="line"><br /></div>
</div>
</section>
<section id="constructor-overloading">
<span id="id15"></span><h3><span class="section-number">17.6.4. </span>Constructor Overloading<a class="headerlink" href="#constructor-overloading" title="Permalink to this heading">¶</a></h3>
<p>The constructor overloading behaves identically to the method overloading (see
<a class="reference internal" href="#class-method-overloading"><span class="std std-ref">Class Method Overloading</span></a>). Each class instance creation expression (see
<a class="reference internal" href="7_expressions.html#new-expressions"><span class="std std-ref">New Expressions</span></a>) resolves the overloading at compile time.</p>
<div class="line-block" id="index-30">
<div class="line"><br /></div>
</div>
</section>
<section id="declaration-distinguishable-by-signatures">
<span id="id16"></span><h3><span class="section-number">17.6.5. </span>Declaration Distinguishable by Signatures<a class="headerlink" href="#declaration-distinguishable-by-signatures" title="Permalink to this heading">¶</a></h3>
<p>Declarations with the same name are distinguishable by signatures if:</p>
<ul class="simple">
<li><p>They are functions with the same name, but their signatures are not
<em>override-equivalent</em> (see <a class="reference internal" href="15_semantics.html#override-equivalent-signatures"><span class="std std-ref">Override-Equivalent Signatures</span></a> and
<a class="reference internal" href="#function-overloading"><span class="std std-ref">Function Overloading</span></a>).</p></li>
<li><p>They are methods with the same name, but their signatures are not
<em>override-equivalent</em> (see <a class="reference internal" href="15_semantics.html#override-equivalent-signatures"><span class="std std-ref">Override-Equivalent Signatures</span></a>,
<a class="reference internal" href="#class-method-overloading"><span class="std std-ref">Class Method Overloading</span></a>, and <a class="reference internal" href="#interface-method-overloading"><span class="std std-ref">Interface Method Overloading</span></a>).</p></li>
<li><p>They are constructors of the same class, but their signatures are not
<em>override-equivalent</em> (see <a class="reference internal" href="15_semantics.html#override-equivalent-signatures"><span class="std std-ref">Override-Equivalent Signatures</span></a> and
<a class="reference internal" href="#constructor-overloading"><span class="std std-ref">Constructor Overloading</span></a>).</p></li>
</ul>
<p id="index-31">The example below represents the functions distinguishable by signatures:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="linenos">2</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">foo</span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<span class="linenos">3</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">foo</span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">[])</span><span class="w"> </span><span class="p">{}</span>
<span class="linenos">4</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">foo</span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
</pre></div>
</div>
<p>The following example represents the functions undistinguishable by signatures
that cause a <span class="target" id="index-32"></span>compile-time error:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="c1">// Functions have override-equivalent signatures</span>
<span class="linenos">2</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">foo</span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<span class="linenos">3</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">foo</span><span class="p">(</span><span class="nx">y</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<span class="linenos">4</span>
<span class="linenos">5</span><span class="w">   </span><span class="c1">// Functions have override-equivalent signatures</span>
<span class="linenos">6</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">foo</span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<span class="linenos">7</span><span class="w">   </span><span class="kr">type</span><span class="w"> </span><span class="nx">MyNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">number</span>
<span class="linenos">8</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">foo</span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">MyNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
</pre></div>
</div>
<div class="line-block" id="index-33">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="native-functions-and-methods">
<span id="id17"></span><h2><span class="section-number">17.7. </span>Native Functions and Methods<a class="headerlink" href="#native-functions-and-methods" title="Permalink to this heading">¶</a></h2>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="native-functions">
<span id="id18"></span><h3><span class="section-number">17.7.1. </span>Native Functions<a class="headerlink" href="#native-functions" title="Permalink to this heading">¶</a></h3>
<p>A <em>native</em> function implemented in a platform-dependent code is typically
written in another programming language (e.g., <em>C</em>). A compile-time error
occurs if a <em>native</em> function has a body.</p>
<div class="line-block" id="index-34">
<div class="line"><br /></div>
</div>
</section>
<section id="native-methods">
<span id="native-methods-experimental"></span><h3><span class="section-number">17.7.2. </span>Native Methods<a class="headerlink" href="#native-methods" title="Permalink to this heading">¶</a></h3>
<p><em>Native</em> methods are the methods implemented in a platform-dependent code
written in another programming language (e.g., <em>C</em>).</p>
<p>A <span class="target" id="index-35"></span>compile-time error occurs if:</p>
<ul class="simple">
<li><p>A method declaration contains the keyword <code class="docutils literal notranslate"><span class="pre">abstract</span></code> along with the
keyword <code class="docutils literal notranslate"><span class="pre">native</span></code>.</p></li>
<li><p>A <em>native</em> method has a body (see <a class="reference internal" href="9_classes.html#method-body"><span class="std std-ref">Method Body</span></a>) that is a block
instead of a simple semicolon or empty body.</p></li>
</ul>
<div class="line-block" id="index-36">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="final-classes-and-methods">
<span id="id19"></span><h2><span class="section-number">17.8. </span>Final Classes and Methods<a class="headerlink" href="#final-classes-and-methods" title="Permalink to this heading">¶</a></h2>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="final-classes">
<span id="final-classes-experimental"></span><h3><span class="section-number">17.8.1. </span>Final Classes<a class="headerlink" href="#final-classes" title="Permalink to this heading">¶</a></h3>
<p>A class may be declared <em>final</em> to prevent its extension. A class declared
<em>final</em> cannot have subclasses, and no method of a <em>final</em> class can be
overridden.</p>
<p>If a class type <em>F</em> expression is declared <em>final</em>, then
only a class <em>F</em> object can be its value.</p>
<p>A <span class="target" id="index-37"></span>compile-time error occurs if the ‘<code class="docutils literal notranslate"><span class="pre">extends</span></code>’ clause of a class
declaration contains another class that is <em>final</em>.</p>
<div class="line-block" id="index-38">
<div class="line"><br /></div>
</div>
</section>
<section id="final-methods">
<span id="final-methods-experimental"></span><h3><span class="section-number">17.8.2. </span>Final Methods<a class="headerlink" href="#final-methods" title="Permalink to this heading">¶</a></h3>
<p>A method can be declared <em>final</em> to prevent it from being overridden (see
<a class="reference internal" href="9_classes.html#overriding-by-instance-methods"><span class="std std-ref">Overriding by Instance Methods</span></a>) or hidden in subclasses.</p>
<p>A <span class="target" id="index-39"></span>compile-time error occurs if:</p>
<ul class="simple">
<li><p>A method declaration contains the keyword <code class="docutils literal notranslate"><span class="pre">abstract</span></code> or <code class="docutils literal notranslate"><span class="pre">static</span></code>
along with the keyword <code class="docutils literal notranslate"><span class="pre">final</span></code>.</p></li>
<li><p>A method declared <em>final</em> is overridden.</p></li>
</ul>
<div class="line-block" id="index-40">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="default-and-static-interface-methods">
<span id="id20"></span><h2><span class="section-number">17.9. </span>Default and Static Interface Methods<a class="headerlink" href="#default-and-static-interface-methods" title="Permalink to this heading">¶</a></h2>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="default-method-declarations">
<span id="id21"></span><h3><span class="section-number">17.9.1. </span>Default Method Declarations<a class="headerlink" href="#default-method-declarations" title="Permalink to this heading">¶</a></h3>
<div class="highlight-abnf notranslate"><div class="highlight"><pre><span></span><span class="nc">interfaceDefaultMethodDeclaration</span>:
<span class="w">    </span>&#39;<span class="nc">private</span>&#39;?<span class="w"> </span><span class="nc">identifier</span><span class="w"> </span><span class="nc">signature</span><span class="w"> </span><span class="nc">block</span>
<span class="w">    </span><span class="c1">;</span>
</pre></div>
</div>
<p>A default method can be explicitly declared <em>private</em> in an interface body.</p>
<p>A block of code that represents the body of a default method in an interface
provides a default implementation for any class if such class does not override
the method that implements the interface.</p>
<div class="line-block" id="index-41">
<div class="line"><br /></div>
</div>
</section>
<section id="static-method-declarations">
<span id="id22"></span><h3><span class="section-number">17.9.2. </span><em>Static</em> Method Declarations<a class="headerlink" href="#static-method-declarations" title="Permalink to this heading">¶</a></h3>
<div class="highlight-abnf notranslate"><div class="highlight"><pre><span></span><span class="nc">interfaceStaticMethodDeclaration</span>:
<span class="w">    </span>&#39;<span class="nc">static</span>&#39;<span class="w"> </span>&#39;<span class="nc">private</span>&#39;?<span class="w"> </span><span class="nc">identifier</span><span class="w"> </span><span class="nc">signature</span><span class="w"> </span><span class="nc">block</span>
<span class="w">    </span>|<span class="w"> </span>&#39;<span class="nc">private</span>&#39;?<span class="w"> </span>&#39;<span class="nc">static</span>&#39;<span class="w"> </span><span class="nc">identifier</span><span class="w"> </span><span class="nc">signature</span><span class="w"> </span><span class="nc">block</span>
<span class="w">    </span><span class="c1">;</span>
</pre></div>
</div>
<p>A <em>static</em> method in an interface body can be explicitly declared <em>private</em>.</p>
<p><em>Static</em> interface method calls refer to no particular object.</p>
<p>In contrast to default methods, <em>static</em> interface methods are not instance
methods.</p>
<p id="index-42">A <span class="target" id="index-43"></span>compile-time error occurs if:</p>
<ul class="simple">
<li><p>The body of a <em>static</em> method attempts to use the keywords <code class="docutils literal notranslate"><span class="pre">this</span></code> or
<code class="docutils literal notranslate"><span class="pre">super</span></code>.</p></li>
<li><p>The header or body of a <em>static</em> method of an interface contains the
name of any surrounding declaration’s type parameter.</p></li>
</ul>
<div class="line-block" id="index-44">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="extension-functions">
<span id="id23"></span><h2><span class="section-number">17.10. </span>Extension Functions<a class="headerlink" href="#extension-functions" title="Permalink to this heading">¶</a></h2>
<p>The <em>extension function</em> mechanism allows using a special form of top-level
functions as extensions of class or interface. Syntactically, <em>extension</em> adds
a new functionality.</p>
<p><em>Extensions</em> can be called in the usual way like methods of the original class.
However, <em>extensions</em> do not actually modify the classes they extend. No new
member is inserted into a class; only new <em>extension functions</em> are callable
with the <em>dot-notation</em> on variables of the class.</p>
<p><em>Extension functions</em> are dispatched statically; what <em>extension function</em>
is being called is already known at compile time based on the receiver type
specified in the extension function declaration.</p>
<p id="index-45"><em>Extension functions</em> specify names, signatures, and bodies:</p>
<div class="highlight-abnf notranslate"><div class="highlight"><pre><span></span><span class="nc">extensionFunctionDeclaration</span>:
<span class="w">    </span>&#39;<span class="nc">static</span>&#39;?<span class="w"> </span>&#39;<span class="nc">function</span>&#39;<span class="w"> </span><span class="nc">typeParameters</span>?<span class="w"> </span><span class="nc">typeReference</span><span class="w"> </span>&#39;.&#39;<span class="w"> </span><span class="nc">identifier</span>
<span class="w">    </span><span class="nc">signature</span><span class="w"> </span><span class="nc">block</span>
<span class="w">    </span><span class="c1">;</span>
</pre></div>
</div>
<p>The keyword <code class="docutils literal notranslate"><span class="pre">this</span></code> inside an extension function corresponds to the receiver
object (i.e., <em>typeReference</em> before the dot).</p>
<p>Class or interface referred by typeReference, and <em>private</em> or <em>protected</em>
members are not accessible within the bodies of their <em>extension functions</em>.
Only <em>public</em> members can be accessed:</p>
<div class="highlight-typescript notranslate" id="index-46"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">       </span><span class="nx">foo</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">bar</span><span class="p">()</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="linenos"> 3</span><span class="w">                    </span><span class="c1">// Extension function bar() is accessible</span>
<span class="linenos"> 4</span><span class="w">       </span><span class="k">protected</span><span class="w"> </span><span class="nx">member_1</span><span class="w"> </span><span class="p">...</span>
<span class="linenos"> 5</span><span class="w">       </span><span class="k">private</span><span class="w"> </span><span class="nx">member_2</span><span class="w"> </span><span class="p">...</span>
<span class="linenos"> 6</span><span class="w">   </span><span class="p">}</span>
<span class="linenos"> 7</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">A</span><span class="p">.</span><span class="nx">bar</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span>
<span class="linenos"> 8</span><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="c1">// Method foo() is accessible as it is public</span>
<span class="linenos"> 9</span><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">member_1</span><span class="w"> </span><span class="c1">// Compile-time error as member_1 is not accessible</span>
<span class="linenos">10</span><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">member_2</span><span class="w"> </span><span class="c1">// Compile-time error as member_2 is not accessible</span>
<span class="linenos">11</span><span class="w">      </span><span class="p">...</span>
<span class="linenos">12</span><span class="w">   </span><span class="p">}</span>
<span class="linenos">13</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">A</span><span class="p">()</span>
<span class="linenos">14</span><span class="w">   </span><span class="nx">a</span><span class="p">.</span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="c1">// Ordinary class method is called</span>
<span class="linenos">15</span><span class="w">   </span><span class="nx">a</span><span class="p">.</span><span class="nx">bar</span><span class="p">()</span><span class="w"> </span><span class="c1">// Class extension function is called</span>
</pre></div>
</div>
<p><em>Extension functions</em> can be generic as in the example below:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nx">B</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">.</span><span class="nx">foo</span><span class="p">(</span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">2</span><span class="w">       </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="p">)</span>
<span class="linenos">3</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">4</span><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">demo</span><span class="w"> </span><span class="p">(</span><span class="nx">p1</span><span class="o">:</span><span class="w"> </span><span class="kt">B</span><span class="o">&lt;</span><span class="nx">SomeClass</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="nx">p2</span><span class="o">:</span><span class="w"> </span><span class="kt">B</span><span class="o">&lt;</span><span class="nx">BaseClass</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">5</span><span class="w">      </span><span class="nx">p1</span><span class="p">.</span><span class="nx">foo</span><span class="w"> </span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nx">SomeClass</span><span class="p">())</span>
<span class="linenos">6</span><span class="w">        </span><span class="c1">// Type inference should determine the instantiating type</span>
<span class="linenos">7</span><span class="w">      </span><span class="nx">p2</span><span class="p">.</span><span class="nx">foo</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">BaseClass</span><span class="o">&gt;</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nx">DerivedClass</span><span class="p">())</span>
<span class="linenos">8</span><span class="w">       </span><span class="c1">// Explicit instantiation</span>
<span class="linenos">9</span><span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p><em>Extension functions</em> are top-level functions that can call one other.
The form of such calls depends on whether <em>static</em> was or was not used while
declaring. This affects the kind of receiver to be used for the call:</p>
<ul class="simple">
<li><p>A <em>static extension function</em> requires the name of type (class or interface).</p></li>
<li><p>A <em>non-static extension function</em> requires a variable (as in the examples
below).</p></li>
</ul>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">       </span><span class="nx">foo</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span>
<span class="linenos"> 3</span><span class="w">          </span><span class="k">this</span><span class="p">.</span><span class="nx">bar</span><span class="p">()</span><span class="w"> </span><span class="c1">// non-static extension function is called with this.</span>
<span class="linenos"> 4</span><span class="w">          </span><span class="nx">A</span><span class="p">.</span><span class="nx">goo</span><span class="p">()</span><span class="w"> </span><span class="c1">// static extension function is called with class name receiver</span>
<span class="linenos"> 5</span><span class="w">          </span><span class="p">...</span>
<span class="linenos"> 6</span><span class="w">       </span><span class="p">}</span>
<span class="linenos"> 7</span><span class="w">   </span><span class="p">}</span>
<span class="linenos"> 8</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">A</span><span class="p">.</span><span class="nx">bar</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span>
<span class="linenos"> 9</span><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="c1">// Method foo() is called</span>
<span class="linenos">10</span><span class="w">      </span><span class="nx">A</span><span class="p">.</span><span class="nx">goo</span><span class="p">()</span><span class="w"> </span><span class="c1">// Other static extension function is called with class name receiver</span>
<span class="linenos">11</span><span class="w">      </span><span class="p">...</span>
<span class="linenos">12</span><span class="w">   </span><span class="p">}</span>
<span class="linenos">13</span><span class="w">   </span><span class="k">static</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">A</span><span class="p">.</span><span class="nx">goo</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span>
<span class="linenos">14</span><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="c1">// Compile-time error as instance members are not accessible</span>
<span class="linenos">15</span><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">bar</span><span class="p">()</span><span class="w"> </span><span class="c1">// Compile-time error as instance extension functions are not accessible</span>
<span class="linenos">16</span><span class="w">      </span><span class="p">...</span>
<span class="linenos">17</span><span class="w">   </span><span class="p">}</span>
<span class="linenos">18</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">A</span><span class="p">()</span>
<span class="linenos">19</span><span class="w">   </span><span class="nx">a</span><span class="p">.</span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="c1">// Ordinary class method is called</span>
<span class="linenos">20</span><span class="w">   </span><span class="nx">a</span><span class="p">.</span><span class="nx">bar</span><span class="p">()</span><span class="w"> </span><span class="c1">// Class instance extension function is called</span>
<span class="linenos">21</span><span class="w">   </span><span class="nx">A</span><span class="p">.</span><span class="nx">goo</span><span class="p">()</span><span class="w"> </span><span class="c1">// Static extension function is called</span>
</pre></div>
</div>
<p><em>Extension functions</em> are dispatched statically, and remain active for all
derived classes until the next definition of the <em>extension function</em> for the
derived class is found:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">Base</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="linenos"> 2</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">Derived</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Base</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="linenos"> 3</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">Base</span><span class="p">.</span><span class="nx">foo</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;Base.foo is called&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="linenos"> 4</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">Derived</span><span class="p">.</span><span class="nx">foo</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;Derived.foo is called&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="kt">Base</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Base</span><span class="p">()</span>
<span class="linenos"> 7</span><span class="w">   </span><span class="nx">b</span><span class="p">.</span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="c1">// `Base.foo is called` to be printed</span>
<span class="linenos"> 8</span><span class="w">      </span><span class="nx">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Derived</span><span class="p">()</span>
<span class="linenos"> 9</span><span class="w">   </span><span class="nx">b</span><span class="p">.</span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="c1">// `Base.foo is called` to be printed</span>
<span class="linenos">10</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">d</span><span class="o">:</span><span class="w"> </span><span class="kt">Derived</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Derived</span><span class="p">()</span>
<span class="linenos">11</span><span class="w">   </span><span class="nx">d</span><span class="p">.</span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="c1">// `Derived.foo is called` to be printed</span>
</pre></div>
</div>
<p>As illustrated by the examples below, an <em>extension function</em> can be:</p>
<ul class="simple">
<li><p>Put into a compilation unit other than class or interface; and</p></li>
<li><p>Imported by using a name of the <em>extension function</em>.</p></li>
</ul>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">   </span><span class="c1">// file a.ets</span>
<span class="linenos"> 2</span><span class="w">   </span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">bar</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;a.ets&quot;</span><span class="w"> </span><span class="c1">// import name &#39;bar&#39;</span>
<span class="linenos"> 3</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 4</span><span class="w">       </span><span class="nx">foo</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span>
<span class="linenos"> 5</span><span class="w">          </span><span class="k">this</span><span class="p">.</span><span class="nx">bar</span><span class="p">()</span><span class="w"> </span><span class="c1">// non-static extension function is called with this.</span>
<span class="linenos"> 6</span><span class="w">          </span><span class="nx">A</span><span class="p">.</span><span class="nx">goo</span><span class="p">()</span><span class="w"> </span><span class="c1">// static extension function is called with class name receiver</span>
<span class="linenos"> 7</span><span class="w">          </span><span class="p">...</span>
<span class="linenos"> 8</span><span class="w">       </span><span class="p">}</span>
<span class="linenos"> 9</span><span class="w">   </span><span class="p">}</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="w">   </span><span class="c1">// file ext.ets</span>
<span class="linenos">12</span><span class="w">   </span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">A</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;a.ets&quot;</span><span class="w"> </span><span class="c1">// import name &#39;A&#39;</span>
<span class="linenos">13</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">A</span><span class="p">.</span><span class="nx">bar</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span>
<span class="linenos">14</span><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="c1">// Method foo() is called</span>
<span class="linenos">15</span><span class="w">      </span><span class="p">...</span>
<span class="linenos">16</span><span class="w">   </span><span class="p">}</span>
</pre></div>
</div>
<p>If an <em>extension function</em> and a type method have the same name and signature,
then calls to that name are routed to the method:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">2</span><span class="w">       </span><span class="nx">foo</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;Method A.foo is called&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">3</span><span class="w">   </span><span class="p">}</span>
<span class="linenos">4</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">A</span><span class="p">.</span><span class="nx">foo</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;Extension A.foo is called&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">5</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">A</span><span class="p">()</span>
<span class="linenos">6</span><span class="w">   </span><span class="nx">a</span><span class="p">.</span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="c1">// Method is called, `Method A.foo is called` to be printed out</span>
</pre></div>
</div>
<p>The precedence between methods and <em>extension functions</em> can be expressed
by the following formula:</p>
<blockquote>
<div><p>derived type instance method &lt;
base type instance method &lt;
derived type extension function &lt;
base type extension function.</p>
</div></blockquote>
<p>In other words, the priority of standard object-oriented semantics is higher
than that of type extension functions:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">Base</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">      </span><span class="nx">foo</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;Method Base.foo is called&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="linenos"> 3</span><span class="w">   </span><span class="p">}</span>
<span class="linenos"> 4</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">Derived</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Base</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 5</span><span class="w">      </span><span class="kd">override</span><span class="w"> </span><span class="nx">foo</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;Method Derived.foo is called&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="linenos"> 6</span><span class="w">   </span><span class="p">}</span>
<span class="linenos"> 7</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">Base</span><span class="p">.</span><span class="nx">foo</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;Extension Base.foo is called&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="linenos"> 8</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">Derived</span><span class="p">.</span><span class="nx">foo</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;Extension Derived.foo is called&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="kt">Base</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Base</span><span class="p">()</span>
<span class="linenos">11</span><span class="w">   </span><span class="nx">b</span><span class="p">.</span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="c1">// `Method Base.foo is called` to be printed</span>
<span class="linenos">12</span><span class="w">   </span><span class="nx">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Derived</span><span class="p">()</span>
<span class="linenos">13</span><span class="w">   </span><span class="nx">b</span><span class="p">.</span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="c1">// `Method Derived.foo is called` to be printed</span>
<span class="linenos">14</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">d</span><span class="o">:</span><span class="w"> </span><span class="kt">Derived</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Derived</span><span class="p">()</span>
<span class="linenos">15</span><span class="w">   </span><span class="nx">d</span><span class="p">.</span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="c1">// `Method Derived.foo is called` to be printed</span>
</pre></div>
</div>
<p>If an <em>extension function</em> and another top-level function have the same name
and signature, then calls to this name are routed to a proper function in
accordance with the form of the call. <em>Extension functions</em> cannot be called
without a receiver as they have access to <code class="docutils literal notranslate"><span class="pre">this</span></code>:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">2</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">A</span><span class="p">.</span><span class="nx">foo</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;Extension A.foo is called&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">3</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">foo</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;Top-level foo is called&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">4</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">A</span><span class="p">()</span>
<span class="linenos">5</span><span class="w">   </span><span class="nx">a</span><span class="p">.</span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="c1">// Extension function is called, `Extension A.foo is called` to be printed out</span>
<span class="linenos">6</span><span class="w">   </span><span class="nx">foo</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="c1">// Top-level function is called, `Top-level foo is called` to be printed out</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="trailing-lambda">
<span id="id24"></span><h2><span class="section-number">17.11. </span>Trailing Lambda<a class="headerlink" href="#trailing-lambda" title="Permalink to this heading">¶</a></h2>
<p>The <em>trailing lambda</em> mechanism allows using a special form of function
or method call when the last parameter of a function or a method is of
function type, and the argument is passed as a lambda using the <code class="docutils literal notranslate"><span class="pre">{}</span></code>
notation.</p>
<p>Syntactically, the <em>trailing lambda</em> looks as follows:</p>
<div class="highlight-typescript notranslate" id="index-47"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">2</span><span class="w">       </span><span class="nx">foo</span><span class="w"> </span><span class="p">(</span><span class="nx">f</span><span class="o">:</span><span class="w"> </span><span class="p">()=&gt;</span><span class="ow">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">3</span><span class="w">   </span><span class="p">}</span>
<span class="linenos">4</span>
<span class="linenos">5</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">A</span><span class="p">()</span>
<span class="linenos">6</span><span class="w">   </span><span class="nx">a.foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;method lambda argument is activated&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">7</span><span class="w">   </span><span class="c1">// method foo receives last argument as an inline lambda</span>
</pre></div>
</div>
<p>The formal syntax of the <em>trailing lambda</em> is presented below:</p>
<div class="highlight-abnf notranslate"><div class="highlight"><pre><span></span><span class="nc">trailingLambdaCall</span>:
<span class="w">    </span><span class="p">(</span><span class="w"> </span><span class="nc">objectReference</span><span class="w"> </span>&#39;.&#39;<span class="w"> </span><span class="nc">identifier</span><span class="w"> </span><span class="nc">typeArguments</span>?
<span class="w">    </span>|<span class="w"> </span><span class="nc">expression</span><span class="w"> </span><span class="p">(</span>&#39;?.&#39;<span class="w"> </span>|<span class="w"> </span><span class="nc">typeArguments</span><span class="p">)</span>?
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="nc">arguments</span><span class="w"> </span><span class="nc">block</span>
<span class="w">    </span><span class="c1">;</span>
</pre></div>
</div>
<p>Currently, no parameter can be specified for the trailing lambda. Otherwise,
a compile-time error occurs.</p>
<p><strong>Note</strong>: If a call is followed by a block, and the function or method
being called has no last function type parameter, then such block is
handled as an ordinary block of statements but not as a lambda function.</p>
<p>In case of other ambiguities (e.g., when a function or method call has the
last parameter, which can be optional, of a function type), a syntax
production that starts with ‘{’ following the function or method call is
handled as the <em>trailing lambda</em>.
If other semantics is needed, then the semicolon ‘;’ separator can be used.
It means that the function or the method is to be called without the last
argument (see <a class="reference internal" href="4_names.html#optional-parameters"><span class="std std-ref">Optional Parameters</span></a>).</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">       </span><span class="nx">foo</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="o">?:</span><span class="w"> </span><span class="p">()=&gt;</span><span class="ow">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="linenos"> 3</span><span class="w">   </span><span class="p">}</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">A</span><span class="p">()</span>
<span class="linenos"> 6</span><span class="w">   </span><span class="nx">a.foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;method lambda argument is activated&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="linenos"> 7</span><span class="w">   </span><span class="c1">// method foo receives last argument as an inline lambda</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="w">   </span><span class="nx">a</span><span class="p">.</span><span class="nx">foo</span><span class="p">();</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;that is the block code&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">10</span><span class="w">   </span><span class="c1">// method &#39;foo&#39; is called with &#39;p&#39; parameter set to &#39;undefined&#39;</span>
<span class="linenos">11</span><span class="w">   </span><span class="c1">// &#39;;&#39; allows to specify explicitly that &#39;{&#39; starts the block</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">bar</span><span class="p">(</span><span class="nx">f</span><span class="o">:</span><span class="w"> </span><span class="p">()=&gt;</span><span class="ow">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="w">   </span><span class="nx">bar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;function lambda argument is activated&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">16</span><span class="w">   </span><span class="c1">// function &#39;bar&#39; receives last argument as an inline lambda,</span>
<span class="linenos">17</span><span class="w">   </span><span class="nx">bar</span><span class="p">();</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;that is the block code&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">18</span><span class="w">   </span><span class="c1">// function &#39;bar&#39; is called with &#39;p&#39; parameter set to &#39;undefined&#39;</span>
</pre></div>
</div>
<div class="highlight-typescript notranslate" id="index-48"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">foo</span><span class="w"> </span><span class="p">(</span><span class="nx">f</span><span class="o">:</span><span class="w"> </span><span class="p">()=&gt;</span><span class="ow">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="linenos"> 2</span><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">bar</span><span class="w"> </span><span class="p">(</span><span class="nx">n</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="w">  </span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;function lambda argument is activated&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="linenos"> 5</span><span class="w">  </span><span class="c1">// function foo receives last argument as an inline lambda,</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="w">  </span><span class="nx">bar</span><span class="p">(</span><span class="mf">5</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;after call of &#39;bar&#39; this block is executed&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="w">  </span><span class="nx">foo</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;function lambda argument is activated&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">})</span>
<span class="linenos">10</span><span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;after call of &#39;foo&#39; this block is executed&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">11</span><span class="w">  </span><span class="cm">/* here, function foo receives lambda as an argument and a block after</span>
<span class="linenos">12</span><span class="cm">   the call is just a block, not a trailing lambda. */</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="enumeration-super-type">
<span id="enumeration-supertype"></span><h2><span class="section-number">17.12. </span>Enumeration Super Type<a class="headerlink" href="#enumeration-super-type" title="Permalink to this heading">¶</a></h2>
<p>Any <em>enum</em> type has class type <em>Object</em> as its supertype. This allows
polymorphic assignments into <em>Object</em> type variables. The <em>instanceof</em> check
can be used to get enumeration variable back by applying the ‘<em>as</em>’ conversion:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w"> </span><span class="kd">enum</span><span class="w"> </span><span class="nx">Commands</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Open</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;fopen&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">Close</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;fclose&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">2</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="kt">Commands</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Commands</span><span class="p">.</span><span class="nx">Open</span>
<span class="linenos">3</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nx">o</span><span class="o">:</span><span class="w"> </span><span class="kt">Object</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="c1">// Autoboxing of enum type to its reference version</span>
<span class="linenos">4</span><span class="w"> </span><span class="c1">// Such reference version type has no name, but can be detected by instanceof</span>
<span class="linenos">5</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">o</span><span class="w"> </span><span class="ow">instanceof</span><span class="w"> </span><span class="nx">Commands</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">6</span><span class="w">    </span><span class="nx">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">o</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">Commands</span><span class="w"> </span><span class="c1">// And explicitly converted back by &#39;as&#39; conversion</span>
<span class="linenos">7</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<div class="line-block" id="index-49">
<div class="line"><br /></div>
</div>
<section id="enumeration-types-conversions">
<span id="id25"></span><h3><span class="section-number">17.12.1. </span>Enumeration Types Conversions<a class="headerlink" href="#enumeration-types-conversions" title="Permalink to this heading">¶</a></h3>
<p>Every <em>enum</em> type is compatible (see <a class="reference internal" href="15_semantics.html#type-compatibility"><span class="std std-ref">Type Compatibility</span></a>) with type
<em>Object</em> (see <a class="reference internal" href="#enumeration-supertype"><span class="std std-ref">Enumeration Super Type</span></a>). Every variable of <em>enum</em> type can
thus be assigned into a variable of type <em>Object</em>.</p>
<div class="line-block" id="index-50">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="enumeration-methods">
<span id="id26"></span><h2><span class="section-number">17.13. </span>Enumeration Methods<a class="headerlink" href="#enumeration-methods" title="Permalink to this heading">¶</a></h2>
<p>Several static methods are available to handle each enumeration type as follows:</p>
<ul class="simple">
<li><p>‘values()’ returns an array of enumeration constants in the order of
declaration.</p></li>
<li><p>‘getValueOf(name: string)’ returns an enumeration constant with the given
name, or throws an error if no constant with such name exists.</p></li>
</ul>
<div class="highlight-typescript notranslate" id="index-51"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="kd">enum</span><span class="w"> </span><span class="nx">Color</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Red</span><span class="p">,</span><span class="w"> </span><span class="nx">Green</span><span class="p">,</span><span class="w"> </span><span class="nx">Blue</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">2</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">colors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Color</span><span class="p">.</span><span class="nx">values</span><span class="p">()</span>
<span class="linenos">3</span><span class="w">   </span><span class="c1">//colors[0] is the same as Color.Red</span>
<span class="linenos">4</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">red</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Color</span><span class="p">.</span><span class="nx">valueOf</span><span class="p">(</span><span class="s2">&quot;Red&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>There is an additional method for instances of any enumeration type:</p>
<ul class="simple">
<li><p>‘valueOf()’ returns an <em>int</em> or <em>string</em> value of an enumeration constant
depending on the type of the enumeration constant.</p></li>
<li><p>‘getName()’ returns the name of an enumeration constant.</p></li>
</ul>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="kd">enum</span><span class="w"> </span><span class="nx">Color</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Red</span><span class="p">,</span><span class="w"> </span><span class="nx">Green</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="nx">Blue</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">2</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="kt">Color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Color</span><span class="p">.</span><span class="nx">Green</span>
<span class="linenos">3</span><span class="w">   </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">valueOf</span><span class="p">())</span><span class="w"> </span><span class="c1">// prints 10</span>
<span class="linenos">4</span><span class="w">   </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">getName</span><span class="p">())</span><span class="w"> </span><span class="c1">// prints Green</span>
</pre></div>
</div>
<p><strong>Note</strong>: <code class="docutils literal notranslate"><span class="pre">c.toString()</span></code> returns the same value as <code class="docutils literal notranslate"><span class="pre">c.getValue().toString()</span></code>.</p>
<div class="line-block" id="index-52">
<div class="line"><br /></div>
</div>
</section>
<section id="exceptions">
<span id="id27"></span><h2><span class="section-number">17.14. </span>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this heading">¶</a></h2>
<p><em>Exception</em> is the base class of all exceptions. <em>Exception</em> is used to
define a new exception, or any class derived from the <em>Exception</em> as the
base of a class:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">MyException</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Exception</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<p id="index-53">A <span class="target" id="index-54"></span>compile-time error occurs if a generic class is a direct or
indirect subclass of <em>Exception</em>.</p>
<p>An <em>exception</em> is thrown explicitly with the <code class="docutils literal notranslate"><span class="pre">throw</span></code> statement.</p>
<p>When an <em>exception</em> is thrown, the surrounding piece of code is to handle it by
correcting the problem, trying an alternative approach, or informing the user.</p>
<p>An <em>exception</em> can  be  processed in two ways:</p>
<ul class="simple">
<li><p>Propagating the exception from a function to the code that calls that
function (see <a class="reference internal" href="#throwing-functions"><span class="std std-ref">Throwing Functions</span></a>);</p></li>
<li><p>Using a <code class="docutils literal notranslate"><span class="pre">try</span></code> statement to handle the exception (see <a class="reference internal" href="8_statements.html#try-statements"><span class="std std-ref">try Statements</span></a>).</p></li>
</ul>
<div class="line-block" id="index-55">
<div class="line"><br /></div>
</div>
<section id="throwing-functions">
<span id="id28"></span><h3><span class="section-number">17.14.1. </span>Throwing Functions<a class="headerlink" href="#throwing-functions" title="Permalink to this heading">¶</a></h3>
<p>The keyword <code class="docutils literal notranslate"><span class="pre">throws</span></code> is used at the end of a signature to indicate that a
function (this notion here includes methods, constructors, or lambdas) can
throw an exception. A function ending with <code class="docutils literal notranslate"><span class="pre">throws</span></code> is called a
<em>throwing function</em>. The function type can also be marked as <code class="docutils literal notranslate"><span class="pre">throws</span></code>:</p>
<div class="highlight-typescript notranslate" id="index-56"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">canThrow</span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kr">int</span><span class="w"> </span><span class="kr">throws</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<p>A <em>throwing function</em> can propagate exceptions to the scope from which
it is called. The propagation of an <em>exception</em> occurs if:</p>
<ul class="simple">
<li><p>The call of a <em>throwing function</em> is not enclosed in a <code class="docutils literal notranslate"><span class="pre">try</span></code> statement; or</p></li>
<li><p>The enclosed <code class="docutils literal notranslate"><span class="pre">try</span></code> statement does not contain a clause that can catch the
exception.</p></li>
</ul>
<p>In the example below, the function call is not enclosed in a <code class="docutils literal notranslate"><span class="pre">try</span></code>
statement; any exception raised by <em>canThrow</em> function is propagated:</p>
<div class="highlight-typescript notranslate" id="index-57"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">propagate1</span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kr">int</span><span class="w"> </span><span class="kr">throws</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">2</span><span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">canThrow</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="c1">// exception is propagated</span>
<span class="linenos">3</span><span class="w">   </span><span class="p">}</span>
</pre></div>
</div>
<p>In the example below, the <code class="docutils literal notranslate"><span class="pre">try</span></code> statement can catch only <code class="docutils literal notranslate"><span class="pre">this</span></code> exceptions.
Any exception raised by <em>canThrow</em> function—except for <em>MyException</em> itself,
and any exception derived from <em>MyException</em>—is propagated:</p>
<div class="highlight-typescript notranslate" id="index-58"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">propagate2</span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kr">int</span><span class="w"> </span><span class="kr">throws</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">2</span><span class="w">     </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">3</span><span class="w">       </span><span class="k">return</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">canThrow</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="c1">//</span>
<span class="linenos">4</span><span class="w">     </span><span class="p">}</span>
<span class="linenos">5</span><span class="w">     </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="o">:</span><span class="w"> </span><span class="kt">MyException</span><span class="p">)</span><span class="w"> </span><span class="cm">/*process*/</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">6</span><span class="w">       </span><span class="k">return</span><span class="w"> </span><span class="mf">0</span>
<span class="linenos">7</span><span class="w">   </span><span class="p">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="non-throwing-functions">
<span id="id29"></span><h3><span class="section-number">17.14.2. </span>Non-Throwing Functions<a class="headerlink" href="#non-throwing-functions" title="Permalink to this heading">¶</a></h3>
<p>A <em>non-throwing function</em> is a function (this notion here includes methods,
constructors, or lambdas) not marked as <code class="docutils literal notranslate"><span class="pre">throws</span></code>. Any exceptions inside a
<em>non-throwing function</em> must be handled inside the function.</p>
<p>A <span class="target" id="index-59"></span>compile-time error occurs if not <strong>all</strong> of the following
requirements are met:</p>
<ul class="simple">
<li><p>The call of a <em>throwing function</em> is enclosed in a <code class="docutils literal notranslate"><span class="pre">try</span></code> statement;</p></li>
<li><p>The enclosing <code class="docutils literal notranslate"><span class="pre">try</span></code> statement has a default ‘<code class="docutils literal notranslate"><span class="pre">catch</span></code>’ clause.</p></li>
</ul>
<div class="highlight-typescript notranslate" id="index-60"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">   </span><span class="c1">// non-throwing function</span>
<span class="linenos"> 2</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">cannotThrow</span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kr">int</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 3</span><span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">canThrow</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="c1">// compile-time error</span>
<span class="linenos"> 4</span><span class="w">   </span><span class="p">}</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">cannotThrow</span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kr">int</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 7</span><span class="w">     </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 8</span><span class="w">       </span><span class="k">return</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">canThrow</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="c1">//</span>
<span class="linenos"> 9</span><span class="w">     </span><span class="p">}</span>
<span class="linenos">10</span><span class="w">     </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="o">:</span><span class="w"> </span><span class="kt">MyException</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* process */</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">11</span><span class="w">     </span><span class="c1">// compile-time error – default catch clause is required</span>
<span class="linenos">12</span><span class="w">   </span><span class="p">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="rethrowing-functions">
<span id="id30"></span><h3><span class="section-number">17.14.3. </span>Rethrowing Functions<a class="headerlink" href="#rethrowing-functions" title="Permalink to this heading">¶</a></h3>
<p>A <em>rethrowing function</em> is a function that accepts a <em>throwing function</em> as a
parameter, and is marked with the keyword <code class="docutils literal notranslate"><span class="pre">rethrows</span></code>.</p>
<p>The body of such function must not contain any <code class="docutils literal notranslate"><span class="pre">throw</span></code> statement that is
not handled by a <code class="docutils literal notranslate"><span class="pre">try</span></code> statement within that body. A function with unhandled
<code class="docutils literal notranslate"><span class="pre">throw</span></code> statements must be marked with the keyword <code class="docutils literal notranslate"><span class="pre">throws</span></code> but not
<code class="docutils literal notranslate"><span class="pre">rethrows</span></code>.</p>
<p id="index-61">Both a <em>throwing</em> and a <em>non-throwing</em> function can be an argument of a
<em>rethrowing function</em> <em>foo</em> that is being called.</p>
<p>If a <em>throwing function</em> is an argument, then the calling of <em>foo</em> can
throw an exception.</p>
<p>This rule is exception-free, i.e., a <em>non-throwing</em> function used as a call
argument cannot throw an exception:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">     </span><span class="kd">function</span><span class="w"> </span><span class="nx">foo</span><span class="w"> </span><span class="p">(</span><span class="nx">action</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="kr">throws</span><span class="p">)</span><span class="w"> </span><span class="nx">rethrows</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">     </span><span class="nx">action</span><span class="p">()</span>
<span class="linenos"> 3</span><span class="w">   </span><span class="p">}</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">canThrow</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 6</span><span class="w">     </span><span class="cm">/* body */</span>
<span class="linenos"> 7</span><span class="w">   </span><span class="p">}</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">cannotThrow</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">10</span><span class="w">     </span><span class="cm">/* body */</span>
<span class="linenos">11</span><span class="w">   </span><span class="p">}</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="w">   </span><span class="c1">// calling rethrowing function:</span>
<span class="linenos">14</span><span class="w">     </span><span class="nx">foo</span><span class="p">(</span><span class="nx">canThrow</span><span class="p">)</span><span class="w"> </span><span class="c1">// exception can be thrown</span>
<span class="linenos">15</span><span class="w">     </span><span class="nx">foo</span><span class="p">(</span><span class="nx">cannotThrow</span><span class="p">)</span><span class="w"> </span><span class="c1">// exception-free</span>
</pre></div>
</div>
<p>A call is exception-free if:</p>
<ul class="simple">
<li><p>Function <em>foo</em> has several parameters of a function type marked
with <em>throws</em>; and</p></li>
<li><p>All actual arguments of the call to <em>foo</em> are non-throwing.</p></li>
</ul>
<p>However, the call can raise an exception, and is handled as any other
<em>throwing function</em> call if at least one of the actual function arguments
is <em>throwing</em>.</p>
<p>It implies that a call to <em>foo</em> within the body of a <em>non-throwing</em> function
must be guaranteed with a <code class="docutils literal notranslate"><span class="pre">try-catch</span></code> statement:</p>
<div class="highlight-typescript notranslate" id="index-62"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">mayThrowContext</span><span class="p">()</span><span class="w"> </span><span class="kr">throws</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">     </span><span class="c1">// calling rethrowing function:</span>
<span class="linenos"> 3</span><span class="w">     </span><span class="nx">foo</span><span class="p">(</span><span class="nx">canThrow</span><span class="p">)</span><span class="w"> </span><span class="c1">// exception can be thrown</span>
<span class="linenos"> 4</span><span class="w">     </span><span class="nx">foo</span><span class="p">(</span><span class="nx">cannotThrow</span><span class="p">)</span><span class="w"> </span><span class="c1">// exception-free</span>
<span class="linenos"> 5</span><span class="w">   </span><span class="p">}</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">neverThrowsContext</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 8</span><span class="w">     </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 9</span><span class="w">       </span><span class="c1">// calling rethrowing function:</span>
<span class="linenos">10</span><span class="w">       </span><span class="nx">foo</span><span class="p">(</span><span class="nx">canThrow</span><span class="p">)</span><span class="w"> </span><span class="c1">// exception can be thrown</span>
<span class="linenos">11</span><span class="w">       </span><span class="nx">foo</span><span class="p">(</span><span class="nx">cannotThrow</span><span class="p">)</span><span class="w"> </span><span class="c1">// exception-free</span>
<span class="linenos">12</span><span class="w">     </span><span class="p">}</span>
<span class="linenos">13</span><span class="w">     </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">14</span><span class="w">       </span><span class="c1">// To handle the situation</span>
<span class="linenos">15</span><span class="w">     </span><span class="p">}</span>
<span class="linenos">16</span><span class="w">   </span><span class="p">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="exceptions-and-initialization-expression">
<span id="id31"></span><h3><span class="section-number">17.14.4. </span>Exceptions and Initialization Expression<a class="headerlink" href="#exceptions-and-initialization-expression" title="Permalink to this heading">¶</a></h3>
<p>A <em>variable declaration</em> (see <a class="reference internal" href="4_names.html#variable-declarations"><span class="std std-ref">Variable Declarations</span></a>) or a <em>constant
declaration</em> (see <a class="reference internal" href="4_names.html#constant-declarations"><span class="std std-ref">Constant Declarations</span></a>) expression used to initialize
a variable or constant must not have calls to functions that can <em>throw</em> or
<em>rethrow</em> exceptions if the declaration is not within a statement that handles
all exceptions.</p>
<p>See <a class="reference internal" href="#throwing-functions"><span class="std std-ref">Throwing Functions</span></a> and <a class="reference internal" href="#rethrowing-functions"><span class="std std-ref">Rethrowing Functions</span></a> for details.</p>
<div class="line-block" id="index-63">
<div class="line"><br /></div>
</div>
</section>
<section id="exceptions-and-errors-inside-field-initializers">
<span id="id32"></span><h3><span class="section-number">17.14.5. </span>Exceptions and Errors Inside Field Initializers<a class="headerlink" href="#exceptions-and-errors-inside-field-initializers" title="Permalink to this heading">¶</a></h3>
<p>Class field initializers cannot call <em>throwing</em> or <em>rethrowing</em> functions.</p>
<p>See <a class="reference internal" href="#throwing-functions"><span class="std std-ref">Throwing Functions</span></a> and <a class="reference internal" href="#rethrowing-functions"><span class="std std-ref">Rethrowing Functions</span></a> for details.</p>
<div class="line-block" id="index-64">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="coroutines">
<span id="id33"></span><h2><span class="section-number">17.15. </span>Coroutines<a class="headerlink" href="#coroutines" title="Permalink to this heading">¶</a></h2>
<p>A function or lambda can be a <em>coroutine</em>. ArkTS supports <strong>basic coroutines</strong>,
<strong>structured coroutines</strong>, and <strong>communication channels</strong>.
Basic coroutines are used to create and launch a coroutine; the result is then
to be awaited.</p>
<div class="line-block" id="index-65">
<div class="line"><br /></div>
</div>
<section id="create-and-launch-a-coroutine">
<span id="id34"></span><h3><span class="section-number">17.15.1. </span>Create and Launch a Coroutine<a class="headerlink" href="#create-and-launch-a-coroutine" title="Permalink to this heading">¶</a></h3>
<p>The following expression is used to create and launch a coroutine:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="nx">launchExpression</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;launch&#39;</span><span class="w"> </span><span class="nx">expression</span><span class="p">;</span>
</pre></div>
</div>
<p>A <span class="target" id="index-66"></span>compile-time error occurs if that expression is not a <em>function call
expression</em> (see <a class="reference internal" href="7_expressions.html#function-call-expression"><span class="std std-ref">Function Call Expression</span></a>).</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">launch</span><span class="w"> </span><span class="nx">cof</span><span class="p">(</span><span class="mf">10</span><span class="p">)</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="w">   </span><span class="c1">// where &#39;cof&#39; can be defined as:</span>
<span class="linenos">4</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">cof</span><span class="p">(</span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kr">int</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">5</span><span class="w">     </span><span class="kd">let</span><span class="w"> </span><span class="nx">res</span><span class="o">:</span><span class="w"> </span><span class="kt">int</span>
<span class="linenos">6</span><span class="w">     </span><span class="c1">// Do something</span>
<span class="linenos">7</span><span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="nx">res</span>
<span class="linenos">8</span><span class="w">   </span><span class="p">}</span>
</pre></div>
</div>
<p>Lambda is used in a launch expression as follows:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">launch</span><span class="w"> </span><span class="p">(</span><span class="nx">n</span><span class="o">:</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* lambda body */</span><span class="p">(</span><span class="mf">7</span><span class="p">)</span>
</pre></div>
</div>
<p id="index-67">The result of the launch expression is of type <em>Promise&lt;T&gt;</em>, where <em>T</em> is the
return type of the function being called:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">foo</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kr">int</span><span class="w"> </span><span class="p">{}</span>
<span class="linenos">2</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">bar</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="linenos">3</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">resfoo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">launch</span><span class="w"> </span><span class="nx">foo</span><span class="p">()</span>
<span class="linenos">4</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">resbar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">launch</span><span class="w"> </span><span class="nx">bar</span><span class="p">()</span>
</pre></div>
</div>
<p>In the example above the type of <em>resfoo</em> is <em>Promise&lt;int&gt;</em>, and the
type of <em>resbar</em> is <em>Promise&lt;void&gt;</em>.</p>
<p>Similarly to TypeScript, ArkTS supports the launching of a coroutine by calling
the function <em>async</em> (see <a class="reference internal" href="#async-functions"><span class="std std-ref">Async Functions</span></a>). No restrictions apply as to
from what scope to call the function <em>async</em>:</p>
<div class="highlight-typescript notranslate" id="index-68"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">foo</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="kr">int</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{}</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="w">   </span><span class="c1">// This will create and launch coroutine</span>
<span class="linenos">4</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">resfoo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">foo</span><span class="p">()</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="awaiting-a-coroutine">
<span id="id35"></span><h3><span class="section-number">17.15.2. </span>Awaiting a Coroutine<a class="headerlink" href="#awaiting-a-coroutine" title="Permalink to this heading">¶</a></h3>
<p>The expressions <em>await</em> and <em>wait</em> are used while a previously launched
coroutine finishes and returns a value:</p>
<div class="highlight-abnf notranslate"><div class="highlight"><pre><span></span><span class="nc">awaitExpresson</span>:
<span class="w">  </span>&#39;<span class="nc">await</span>&#39;<span class="w"> </span><span class="nc">expression</span>
<span class="w">  </span><span class="c1">;</span>
</pre></div>
</div>
<p>A <span class="target" id="index-69"></span>compile-time error occurs if the expression type is not <em>Promise&lt;T&gt;</em>.</p>
<div class="highlight-typescript notranslate" id="index-70"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">promise</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">launch</span><span class="w"> </span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kr">int</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">()</span>
<span class="linenos">2</span><span class="w">   </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">await</span><span class="w"> </span><span class="nx">promise</span><span class="p">)</span><span class="w"> </span><span class="c1">// output: 1</span>
</pre></div>
</div>
<p>If the coroutine result must be ignored, then the expression statement
<code class="docutils literal notranslate"><span class="pre">await</span></code> is used:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* do something */</span><span class="w"> </span><span class="p">}</span>
<span class="linenos">2</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">promise</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">launch</span><span class="w"> </span><span class="nx">foo</span><span class="p">()</span>
<span class="linenos">3</span><span class="w">   </span><span class="k">await</span><span class="w"> </span><span class="nx">promise</span>
</pre></div>
</div>
<div class="line-block" id="index-71">
<div class="line"><br /></div>
</div>
</section>
<section id="the-promise-t-class">
<span id="id36"></span><h3><span class="section-number">17.15.3. </span>The Promise&lt;T&gt; Class<a class="headerlink" href="#the-promise-t-class" title="Permalink to this heading">¶</a></h3>
<p>The class <em>Promise&lt;T&gt;</em> represents the values returned by launch expressions.
It belongs to the essential kernel packages of the standard library (see
<a class="reference internal" href="18_stdlib.html#standard-library"><span class="std std-ref">Standard Library</span></a>), and thus it is imported by default and may be used
without any qualification.</p>
<p>The following methods are used as follows:</p>
<ul class="simple">
<li><p><em>then</em> takes two arguments (the first argument is the callback used if the
promise is fulfilled, and the second if it is rejected), and returns
<em>Promise&lt;U&gt;</em>.</p></li>
</ul>
<div class="highlight-typescript notranslate" id="index-72"><div class="highlight"><pre><span></span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">U</span><span class="o">&gt;</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;::</span><span class="nx">then</span><span class="o">&lt;</span><span class="nx">U</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">fullfillCallback</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="kt">function</span>
<span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">val</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">U</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="nx">rejectCallback</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="o">:</span><span class="w"> </span><span class="kt">Object</span><span class="p">)</span>
<span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">U</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><em>catch</em> is the alias for <em>Promise&lt;T&gt;</em>.then&lt;U&gt;((value: T) : U =&gt; {},
onRejected).</p></li>
</ul>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">U</span><span class="o">&gt;</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;::</span><span class="k">catch</span><span class="o">&lt;</span><span class="nx">U</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">rejectCallback</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="o">:</span>
<span class="w">    </span><span class="kt">Object</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">U</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><em>finally</em> takes one argument (the callback called after <em>promise</em> is either
fulfilled or rejected) and returns <em>Promise&lt;T&gt;</em>.</p></li>
</ul>
<div class="highlight-abnf notranslate" id="index-73"><div class="highlight"><pre><span></span><span class="nc">Promise</span>&lt;<span class="nc">U</span>&gt;<span class="w"> </span><span class="nc">Promise</span>&lt;<span class="nc">T</span>&gt;::<span class="nc">finally</span>&lt;<span class="nc">U</span>&gt;<span class="p">(</span><span class="nc">finallyCallback</span><span class="w"> </span>:<span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="nc">Object</span>:
<span class="nc">T</span><span class="p">)</span><span class="w"> </span>:<span class="w"> </span><span class="nc">Promise</span>&lt;<span class="nc">U</span>&gt;<span class="p">)</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="structured-coroutines">
<span id="id37"></span><h3><span class="section-number">17.15.4. </span>Structured Coroutines<a class="headerlink" href="#structured-coroutines" title="Permalink to this heading">¶</a></h3>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="channels-classes">
<span id="id38"></span><h3><span class="section-number">17.15.5. </span>Channels Classes<a class="headerlink" href="#channels-classes" title="Permalink to this heading">¶</a></h3>
<p><em>Channels</em> are used to send data between coroutines.</p>
<p><em>Channels classes</em> are a part of the coroutine-related package of the
standard library (see <a class="reference internal" href="18_stdlib.html#standard-library"><span class="std std-ref">Standard Library</span></a>).</p>
<div class="line-block" id="index-74">
<div class="line"><br /></div>
</div>
</section>
<section id="async-functions">
<span id="id39"></span><h3><span class="section-number">17.15.6. </span>Async Functions<a class="headerlink" href="#async-functions" title="Permalink to this heading">¶</a></h3>
<p>The function <em>async</em> is an implicit coroutine that can be called as a
regular function.</p>
<p>The return type of an <em>async</em> function must be <em>Promise&lt;T&gt;</em> (see
<a class="reference internal" href="#the-promise-t-class"><span class="std std-ref">The Promise&lt;T&gt; Class</span></a>).
Returning values of types <em>Promise&lt;T&gt;</em> and <em>T</em> from the function <em>async</em>
is allowed.</p>
<p>Using return statement without an expression is allowed if the return type
is <em>Promise&lt;void&gt;</em>.
<em>No-argument</em> return statement can be added implicitly as the last statement
of the function body if there is no explicit return statement in a function
with the return type <em>Promise&lt;void&gt;</em>.</p>
<p><strong>Note</strong>: Using this annotation is not recommended because this type of
functions is only supported for the sake of backward TypeScript compatibility.</p>
<div class="line-block" id="index-75">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="packages">
<span id="id40"></span><h2><span class="section-number">17.16. </span>Packages<a class="headerlink" href="#packages" title="Permalink to this heading">¶</a></h2>
<p>One or more <em>package modules</em> form a package:</p>
<div class="highlight-abnf notranslate"><div class="highlight"><pre><span></span><span class="nc">packageDeclaration</span>:
<span class="w">    </span><span class="nc">packageModule</span>+
<span class="w">    </span><span class="c1">;</span>
</pre></div>
</div>
<p><em>Packages</em> are stored in a file system or a database (see
<a class="reference internal" href="13_modules.html#compilation-units-in-host-system"><span class="std std-ref">Compilation Units in Host System</span></a>).</p>
<p>A <em>package</em> can consist of several package modules if all such modules
have the same <em>package header</em>:</p>
<div class="highlight-abnf notranslate" id="index-76"><div class="highlight"><pre><span></span><span class="nc">packageModule</span>:
<span class="w">    </span><span class="nc">packageHeader</span><span class="w"> </span><span class="nc">packageModuleDeclaration</span>
<span class="w">    </span><span class="c1">;</span>

<span class="nc">packageHeader</span>:
<span class="w">    </span>&#39;<span class="nc">package</span>&#39;<span class="w"> </span><span class="nc">qualifiedName</span>
<span class="w">    </span><span class="c1">;</span>

<span class="nc">packageModuleDeclaration</span>:
<span class="w">    </span><span class="nc">importDirective</span><span class="o">*</span><span class="w"> </span><span class="nc">packageTopDeclaration</span><span class="o">*</span>
<span class="w">    </span><span class="c1">;</span>

<span class="nc">packageTopDeclaration</span>:
<span class="w">    </span><span class="nc">topDeclaration</span><span class="w"> </span>|<span class="w"> </span><span class="nc">packageInitializer</span>
<span class="w">    </span><span class="c1">;</span>
</pre></div>
</div>
<p>A <span class="target" id="index-77"></span>compile-time error occurs if:</p>
<ul class="simple">
<li><p>A <em>package module</em> contains no package header; or</p></li>
<li><p>Package headers of two package modules in the same package have
different identifiers.</p></li>
</ul>
<p>A <em>package module</em> automatically imports all exported entities from the
essential kernel packages of the standard library (see <a class="reference internal" href="18_stdlib.html#standard-library"><span class="std std-ref">Standard Library</span></a>).
All entities from these packages are accessible as simple names.</p>
<p>A <em>package module</em> can automatically access all top-level entities
declared in all modules that constitute the package.</p>
<div class="line-block" id="index-78">
<div class="line"><br /></div>
</div>
<section id="internal-access-modifier">
<span id="internal-access-modifier-experimental"></span><h3><span class="section-number">17.16.1. </span>Internal Access Modifier<a class="headerlink" href="#internal-access-modifier" title="Permalink to this heading">¶</a></h3>
<p>The modifier <em>internal</em> indicates that a class member, a constructor, or
an interface member is accessible within its compilation unit only.
If the compilation unit is a package (see <a class="reference internal" href="#packages"><span class="std std-ref">Packages</span></a>), then <em>internal</em>
members can be used in any <em>package module</em>. If the compilation unit is a
separate module (see <a class="reference internal" href="13_modules.html#separate-modules"><span class="std std-ref">Separate Modules</span></a>), then <em>internal</em> members can be
used within this module.</p>
<div class="highlight-typescript notranslate" id="index-79"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">C</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">     </span><span class="nx">internal</span><span class="w"> </span><span class="nx">count</span><span class="o">:</span><span class="w"> </span><span class="kt">int</span>
<span class="linenos"> 3</span><span class="w">     </span><span class="nx">getCount</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kr">int</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 4</span><span class="w">       </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">count</span><span class="w"> </span><span class="c1">// ok</span>
<span class="linenos"> 5</span><span class="w">     </span><span class="p">}</span>
<span class="linenos"> 6</span><span class="w">   </span><span class="p">}</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">increment</span><span class="p">(</span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="kt">C</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 9</span><span class="w">     </span><span class="nx">c</span><span class="p">.</span><span class="nx">count</span><span class="o">++</span><span class="w"> </span><span class="c1">// ok</span>
<span class="linenos">10</span><span class="w">   </span><span class="p">}</span>
</pre></div>
</div>
<div class="line-block" id="index-80">
<div class="line"><br /></div>
</div>
</section>
<section id="package-initializer">
<span id="id41"></span><h3><span class="section-number">17.16.2. </span>Package Initializer<a class="headerlink" href="#package-initializer" title="Permalink to this heading">¶</a></h3>
<p>Among all <em>package modules</em> there can be one to contain a code that performs
initialization of global variables across all package modules. The appropriate
syntax is presented below:</p>
<div class="highlight-abnf notranslate" id="index-81"><div class="highlight"><pre><span></span><span class="nc">packageInitializer</span>:
<span class="w">    </span>&#39;<span class="nc">static</span>&#39;<span class="w"> </span><span class="nc">block</span>
<span class="w">    </span><span class="c1">;</span>
</pre></div>
</div>
<p>A <span class="target" id="index-82"></span>compile-time error occurs if a package contains more than one
<em>package initializer</em>.</p>
<p>A <em>package initializer</em> is executed only once right before the first activation
of the package (calling an exported function or accessing an exported
global variable).</p>
<div class="line-block" id="index-83">
<div class="line"><br /></div>
</div>
</section>
<section id="sub-entity-binding">
<span id="id42"></span><h3><span class="section-number">17.16.3. </span>Sub-Entity Binding<a class="headerlink" href="#sub-entity-binding" title="Permalink to this heading">¶</a></h3>
<p>The import bindings ‘<em>qualifiedName</em>’ (that consists of at least two
identifiers) or ‘<em>qualifiedName</em> as A’ bind a sub-entity to the declaration
scope of the current module.</p>
<p>‘L’ is a <em>static</em> entity and the last identifier in the ‘<em>qualifiedName</em> A.B.L’.
L’s <em>public</em> access modifier is defined in the class or interface denoted in the
previous part of the ‘<em>qualifiedName</em>’. ‘L’ is accessible regardless of the
export status of the class or the interface it belongs to.</p>
<p>An entity (or—in the case of overloaded methods—entities) is bound by its
original name, or by an alias (if the alias is set). In the latter case, the
original name becomes inaccessible.</p>
<p id="index-84">The following module can be considered an example:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">2</span><span class="w">     </span><span class="kd">class</span><span class="w"> </span><span class="nx">B</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">3</span><span class="w">       </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nx">L</span><span class="o">:</span><span class="w"> </span><span class="kt">int</span>
<span class="linenos">4</span><span class="w">     </span><span class="p">}</span>
<span class="linenos">5</span><span class="w">   </span><span class="p">}</span>
</pre></div>
</div>
<p>The table below illustrates the import of this module:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Import</p></th>
<th class="head"></th>
<th class="head"><p>Usage</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">A</span><span class="p">.</span><span class="nx">B</span><span class="p">.</span><span class="nx">L</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;...&quot;</span>
</pre></div>
</div>
</td>
<td></td>
<td><div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">L</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">A</span><span class="p">.</span><span class="nx">B</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;...&quot;</span>
</pre></div>
</div>
</td>
<td></td>
<td><div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">B</span><span class="p">()</span><span class="w"> </span><span class="c1">// OK</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">A</span><span class="p">()</span><span class="w"> </span><span class="c1">// Error: &#39;A&#39; is</span>
<span class="w">   </span><span class="nx">not</span><span class="w"> </span><span class="nx">accessible</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">A</span><span class="p">.</span><span class="nx">B</span><span class="p">.</span><span class="nx">L</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">X</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;..&quot;</span>
</pre></div>
</div>
</td>
<td></td>
<td><div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">X</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">A</span><span class="p">.</span><span class="nx">B</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">AB</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;...&quot;</span>
</pre></div>
</div>
</td>
<td></td>
<td><div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">AB</span><span class="p">()</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>This form of binding is included in the language specifically to simplify
the migration from the languages that support access to sub-entities as
simple names. This feature is to be used only for migration.</p>
<div class="line-block" id="index-85">
<div class="line"><br /></div>
</div>
</section>
<section id="all-static-sub-entities-binding">
<span id="id43"></span><h3><span class="section-number">17.16.4. </span>All Static Sub-Entities Binding<a class="headerlink" href="#all-static-sub-entities-binding" title="Permalink to this heading">¶</a></h3>
<p>The import binding ‘<em>qualifiedName.*</em> ‘ binds all <em>public static</em> sub-entities
of the entity denoted by the <em>qualifiedName</em> to the declaration scope of the
current module.</p>
<p>The following module can be considered an example:</p>
<div class="highlight-typescript notranslate" id="index-86"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">2</span><span class="w">     </span><span class="kd">class</span><span class="w"> </span><span class="nx">Point</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">3</span><span class="w">       </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nx">X</span><span class="o">:</span><span class="w"> </span><span class="kt">int</span>
<span class="linenos">4</span><span class="w">       </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nx">Y</span><span class="o">:</span><span class="w"> </span><span class="kt">int</span>
<span class="linenos">5</span><span class="w">       </span><span class="k">public</span><span class="w"> </span><span class="nx">isZero</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="p">{}</span>
<span class="linenos">6</span><span class="w">     </span><span class="p">}</span>
<span class="linenos">7</span><span class="w">   </span><span class="p">}</span>
</pre></div>
</div>
<p>The examples below illustrate the import of this module:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="c1">// Import:</span>
<span class="linenos">2</span><span class="w">   </span><span class="k">import</span><span class="w"> </span><span class="nx">A</span><span class="p">.</span><span class="nx">Point</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;...&quot;</span>
</pre></div>
</div>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w">   </span><span class="c1">// Usage:</span>
<span class="linenos">2</span><span class="w">   </span><span class="k">import</span><span class="w"> </span><span class="nx">A</span><span class="p">.</span><span class="nx">Point</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;...&quot;</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="nx">X</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="nx">Y</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">0</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// OK</span>
<span class="linenos">5</span><span class="w">      </span><span class="c1">// ...</span>
<span class="linenos">6</span><span class="w">   </span><span class="p">}</span>
<span class="linenos">7</span>
<span class="linenos">8</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">isZero</span><span class="p">()</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="ne">Error</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;isZero&#39;</span><span class="w"> </span><span class="nx">is</span><span class="w"> </span><span class="nx">not</span><span class="w"> </span><span class="k">static</span>
</pre></div>
</div>
<p>This form of binding is included into ArkTS specifically to simplify the
migration from the languages that support access to sub-entities as simple
names. This feature is to be used only for migration.</p>
<div class="line-block" id="index-87">
<div class="line"><br /></div>
</div>
</section>
<section id="import-and-overloading-of-function-names">
<span id="id44"></span><h3><span class="section-number">17.16.5. </span>Import and Overloading of Function Names<a class="headerlink" href="#import-and-overloading-of-function-names" title="Permalink to this heading">¶</a></h3>
<p>While importing functions, the following situations can occur:</p>
<ul class="simple">
<li><p><strong>Overloading</strong>, where different imported functions have the same name
but different signatures, or a function (functions) of the current module
and an imported function (functions) have the same name but different
signatures.</p></li>
<li><p><strong>Shadowing</strong>, where a function (functions) of the current module and an
imported function (functions) have the same name and signature.</p></li>
</ul>
<div class="line-block" id="index-88">
<div class="line"><br /></div>
</div>
</section>
<section id="overloading-of-function-names">
<span id="id45"></span><h3><span class="section-number">17.16.6. </span>Overloading of Function Names<a class="headerlink" href="#overloading-of-function-names" title="Permalink to this heading">¶</a></h3>
<p><strong>Overloading</strong> is the situation when a compilation unit has access to several
functions with the same names (regardless of where such functions are declared).
The code can use all such functions if they have distinguishable signatures
(i.e., the functions are not override-equivalent):</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">   </span><span class="kr">package</span><span class="w"> </span><span class="nx">P1</span>
<span class="linenos"> 2</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">foo</span><span class="p">(</span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="w">   </span><span class="kr">package</span><span class="w"> </span><span class="nx">P2</span>
<span class="linenos"> 5</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">foo</span><span class="p">(</span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="w">   </span><span class="c1">// Main module</span>
<span class="linenos"> 8</span><span class="w">   </span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">foo</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;path_to_file_with_P1&quot;</span>
<span class="linenos"> 9</span><span class="w">   </span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">foo</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;path_to_file_with_P2&quot;</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">foo</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">double</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">14</span><span class="w">     </span><span class="nx">foo</span><span class="p">(</span><span class="mf">5</span><span class="p">)</span><span class="w"> </span><span class="c1">// Call to P1.foo(int)</span>
<span class="linenos">15</span><span class="w">     </span><span class="nx">foo</span><span class="p">(</span><span class="s2">&quot;A string&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// Call to P2.foo(string)</span>
<span class="linenos">16</span><span class="w">     </span><span class="nx">foo</span><span class="p">(</span><span class="mf">3.141592653589</span><span class="p">)</span><span class="w"> </span><span class="c1">// Call to local foo(double)</span>
<span class="linenos">17</span><span class="w">   </span><span class="p">}</span>
</pre></div>
</div>
<div class="line-block" id="index-89">
<div class="line"><br /></div>
</div>
</section>
<section id="shadowing-of-function-names">
<span id="id46"></span><h3><span class="section-number">17.16.7. </span>Shadowing of Function Names<a class="headerlink" href="#shadowing-of-function-names" title="Permalink to this heading">¶</a></h3>
<p><strong>Shadowing</strong> is the <span class="target" id="index-90"></span>compile-time error that occurs if an imported
function is identical to the function declared in the current compilation
unit (the same names and override-equivalent signatures), i.e., the
declarations are duplicated.</p>
<p>Qualified import or alias in import can be used to access the imported entity.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">   </span><span class="kr">package</span><span class="w"> </span><span class="nx">P1</span>
<span class="linenos"> 2</span><span class="w">      </span><span class="kd">function</span><span class="w"> </span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="linenos"> 3</span><span class="w">   </span><span class="kr">package</span><span class="w"> </span><span class="nx">P2</span>
<span class="linenos"> 4</span><span class="w">      </span><span class="kd">function</span><span class="w"> </span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="linenos"> 5</span><span class="w">   </span><span class="c1">// Main program</span>
<span class="linenos"> 6</span><span class="w">   </span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">foo</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;path_to_file_with_P1&quot;</span>
<span class="linenos"> 7</span><span class="w">   </span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">foo</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;path_to_file_with_P2&quot;</span><span class="w"> </span><span class="cm">/* Error: duplicating</span>
<span class="linenos"> 8</span><span class="cm">       declarations imported*/</span>
<span class="linenos"> 9</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="cm">/* Error: duplicating declaration identified</span>
<span class="linenos">10</span><span class="cm">       */</span>
<span class="linenos">11</span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">12</span><span class="w">     </span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="c1">// Error: ambiguous function call</span>
<span class="linenos">13</span><span class="w">     </span><span class="c1">// But not a call to local foo()</span>
<span class="linenos">14</span><span class="w">     </span><span class="c1">// foo() from P1 and foo() from P2 are not accessible</span>
<span class="linenos">15</span><span class="w">   </span><span class="p">}</span>
</pre></div>
</div>
<div class="line-block" id="index-91">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="generics-experimental">
<span id="id47"></span><h2><span class="section-number">17.17. </span>Generics Experimental<a class="headerlink" href="#generics-experimental" title="Permalink to this heading">¶</a></h2>
<section id="declaration-site-variance">
<span id="id48"></span><h3><span class="section-number">17.17.1. </span>Declaration-Site Variance<a class="headerlink" href="#declaration-site-variance" title="Permalink to this heading">¶</a></h3>
<p>Optionally, a type parameter can have keywords <code class="docutils literal notranslate"><span class="pre">in</span></code> or <code class="docutils literal notranslate"><span class="pre">out</span></code> (a
<em>variance modifier</em>, which specifies the variance of the type parameter).</p>
<p><strong>Note</strong>: This description of variance modifiers is preliminary. The details
are to be specified in the future versions of ArkTS.</p>
<p>Type parameters with the keyword <code class="docutils literal notranslate"><span class="pre">out</span></code> are <em>covariant</em>, and can be used in
the out-position only.</p>
<p>Type parameters with the keyword <code class="docutils literal notranslate"><span class="pre">in</span></code> are <em>contravariant</em>, and can be used
in the in-position only.</p>
<p>Type parameters with no variance modifier are implicitly <em>invariant</em>, and can
occur in any position.</p>
<p id="index-92">A <span class="target" id="index-93"></span>compile-time error occurs if a function, method, or constructor
type parameters have a variance modifier specified.</p>
<p><em>Variance</em> is used to describe the subtyping (see <a class="reference internal" href="15_semantics.html#subtyping"><span class="std std-ref">Subtyping</span></a>) operation
on parameterized types (see <a class="reference internal" href="5_generics.html#generic-declarations"><span class="std std-ref">Generic Declarations</span></a>). The
variance of the corresponding type parameter <em>F</em> defines the subtyping between
<em>T&lt;A&gt;</em> and <em>T&lt;B&gt;</em> (in the case of declaration-site variance with two different
types <em>A</em> &lt;: <em>B</em>) as follows:</p>
<ul class="simple">
<li><p>Covariant (<em>out F</em>): <em>T&lt;A&gt;</em> &lt;: <em>T&lt;B&gt;</em>;</p></li>
<li><p>Contravariant (<em>in F</em>): <em>T&lt;A&gt;</em> :&gt; <em>T&lt;B&gt;</em>;</p></li>
<li><p>Invariant (default) (<em>F</em>).</p></li>
</ul>
</section>
<section id="nonnullish-type-parameter">
<span id="index-94"></span><span id="id49"></span><h3><span class="section-number">17.17.2. </span>NonNullish Type Parameter<a class="headerlink" href="#nonnullish-type-parameter" title="Permalink to this heading">¶</a></h3>
<p>When some generic class has a type parameter with nullish union type constraint
then a special syntax for the type annotation can be used to get a non-nullish
version of the type parameter variable. The example below illustrates the
possibility:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">A</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// in fact it extends Object|null|undefined</span>
<span class="linenos"> 2</span><span class="w">       </span><span class="nx">foo</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="o">!</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// foo returns non-nullish value of p</span>
<span class="linenos"> 3</span><span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="nx">p</span><span class="o">!</span>
<span class="linenos"> 4</span><span class="w">       </span><span class="p">}</span>
<span class="linenos"> 5</span><span class="w">   </span><span class="p">}</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">B</span><span class="o">&lt;</span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">SomeType</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">null</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 8</span><span class="w">       </span><span class="nx">foo</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="o">!</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// foo returns non-nullish value of p</span>
<span class="linenos"> 9</span><span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="nx">p</span><span class="o">!</span>
<span class="linenos">10</span><span class="w">       </span><span class="p">}</span>
<span class="linenos">11</span><span class="w">   </span><span class="p">}</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="w">   </span><span class="kd">class</span><span class="w"> </span><span class="nx">C</span><span class="o">&lt;</span><span class="nx">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">SomeType</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">undefined</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">14</span><span class="w">       </span><span class="nx">foo</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="o">!</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// foo returns non-nullish value of p</span>
<span class="linenos">15</span><span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="nx">p</span><span class="o">!</span>
<span class="linenos">16</span><span class="w">       </span><span class="p">}</span>
<span class="linenos">17</span><span class="w">   </span><span class="p">}</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">A</span><span class="o">&lt;</span><span class="nb">Object</span><span class="o">&gt;</span>
<span class="linenos">20</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">B</span><span class="o">&lt;</span><span class="nx">SomeType</span><span class="o">&gt;</span>
<span class="linenos">21</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">C</span><span class="o">&lt;</span><span class="nx">SomeType</span><span class="o">&gt;</span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">result</span><span class="o">:</span><span class="w"> </span><span class="kt">Object</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Object</span><span class="w">  </span><span class="c1">// Type of result is non-nullish !</span>
<span class="linenos">24</span><span class="w">   </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">a</span><span class="p">.</span><span class="nx">foo</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span>
<span class="linenos">25</span><span class="w">   </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">foo</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nx">SomeType</span><span class="p">)</span>
<span class="linenos">26</span><span class="w">   </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">c</span><span class="p">.</span><span class="nx">foo</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nx">SomeType</span><span class="p">)</span>
<span class="linenos">27</span>
<span class="linenos">28</span><span class="w">   </span><span class="c1">// All such assignments are type-valid as well</span>
<span class="linenos">29</span><span class="w">   </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">a</span><span class="p">.</span><span class="nx">foo</span><span class="p">(</span><span class="ow">void</span><span class="p">)</span><span class="w">      </span><span class="c1">// void! =&gt; never</span>
<span class="linenos">30</span><span class="w">   </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">foo</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span><span class="w">      </span><span class="c1">// null! =&gt; never</span>
<span class="linenos">31</span><span class="w">   </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">c</span><span class="p">.</span><span class="nx">foo</span><span class="p">(</span><span class="kc">undefined</span><span class="p">)</span><span class="w"> </span><span class="c1">// undefined! =&gt; never</span>
</pre></div>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">ArkTS Specification</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="1_intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_lexical.html">2. Lexical Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="3_types.html">3. Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="4_names.html">4. Names, Declarations and Scopes</a></li>
<li class="toctree-l1"><a class="reference internal" href="5_generics.html">5. Generics</a></li>
<li class="toctree-l1"><a class="reference internal" href="6_conversions.html">6. Contexts and Conversions</a></li>
<li class="toctree-l1"><a class="reference internal" href="7_expressions.html">7. Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="8_statements.html">8. Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="9_classes.html">9. Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="10_interfaces.html">10. Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="11_enums.html">11. Enumerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="12_errors.html">12. Error Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="13_modules.html">13. Compilation Units, Packages, and Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="14_ambients.html">14. Ambient Declarations</a></li>
<li class="toctree-l1"><a class="reference internal" href="15_semantics.html">15. Semantic Rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="16_gui.html">16. Support for GUI Programming</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">17. Experimental Features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#character-type-and-literals">17.1. Character Type and Literals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#character-literals">17.1.1. Character Literals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#character-type-and-operations">17.1.2. Character Type and Operations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#array-creation-expressions">17.2. Array Creation Expressions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#runtime-evaluation-of-array-creation-expressions">17.2.1. Runtime Evaluation of Array Creation Expressions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#indexable-types">17.3. Indexable Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#iterable-types">17.4. Iterable Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#statements">17.5. Statements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#for-of-type-annotation">17.5.1. For-of Type Annotation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multiple-catch-clauses-in-try-statements">17.5.2. Multiple Catch Clauses in Try Statements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assert-statements">17.5.3. <code class="docutils literal notranslate"><span class="pre">Assert</span></code> Statements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#function-and-method-overloading">17.6. Function and Method Overloading</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#function-overloading">17.6.1. Function Overloading</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-method-overloading">17.6.2. Class Method Overloading</a></li>
<li class="toctree-l3"><a class="reference internal" href="#interface-method-overloading">17.6.3. Interface Method Overloading</a></li>
<li class="toctree-l3"><a class="reference internal" href="#constructor-overloading">17.6.4. Constructor Overloading</a></li>
<li class="toctree-l3"><a class="reference internal" href="#declaration-distinguishable-by-signatures">17.6.5. Declaration Distinguishable by Signatures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#native-functions-and-methods">17.7. Native Functions and Methods</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#native-functions">17.7.1. Native Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#native-methods">17.7.2. Native Methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#final-classes-and-methods">17.8. Final Classes and Methods</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#final-classes">17.8.1. Final Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#final-methods">17.8.2. Final Methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#default-and-static-interface-methods">17.9. Default and Static Interface Methods</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#default-method-declarations">17.9.1. Default Method Declarations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#static-method-declarations">17.9.2. <em>Static</em> Method Declarations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#extension-functions">17.10. Extension Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#trailing-lambda">17.11. Trailing Lambda</a></li>
<li class="toctree-l2"><a class="reference internal" href="#enumeration-super-type">17.12. Enumeration Super Type</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#enumeration-types-conversions">17.12.1. Enumeration Types Conversions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#enumeration-methods">17.13. Enumeration Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exceptions">17.14. Exceptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#throwing-functions">17.14.1. Throwing Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#non-throwing-functions">17.14.2. Non-Throwing Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rethrowing-functions">17.14.3. Rethrowing Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exceptions-and-initialization-expression">17.14.4. Exceptions and Initialization Expression</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exceptions-and-errors-inside-field-initializers">17.14.5. Exceptions and Errors Inside Field Initializers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#coroutines">17.15. Coroutines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-and-launch-a-coroutine">17.15.1. Create and Launch a Coroutine</a></li>
<li class="toctree-l3"><a class="reference internal" href="#awaiting-a-coroutine">17.15.2. Awaiting a Coroutine</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-promise-t-class">17.15.3. The Promise&lt;T&gt; Class</a></li>
<li class="toctree-l3"><a class="reference internal" href="#structured-coroutines">17.15.4. Structured Coroutines</a></li>
<li class="toctree-l3"><a class="reference internal" href="#channels-classes">17.15.5. Channels Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#async-functions">17.15.6. Async Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#packages">17.16. Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#internal-access-modifier">17.16.1. Internal Access Modifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="#package-initializer">17.16.2. Package Initializer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sub-entity-binding">17.16.3. Sub-Entity Binding</a></li>
<li class="toctree-l3"><a class="reference internal" href="#all-static-sub-entities-binding">17.16.4. All Static Sub-Entities Binding</a></li>
<li class="toctree-l3"><a class="reference internal" href="#import-and-overloading-of-function-names">17.16.5. Import and Overloading of Function Names</a></li>
<li class="toctree-l3"><a class="reference internal" href="#overloading-of-function-names">17.16.6. Overloading of Function Names</a></li>
<li class="toctree-l3"><a class="reference internal" href="#shadowing-of-function-names">17.16.7. Shadowing of Function Names</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#generics-experimental">17.17. Generics Experimental</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#declaration-site-variance">17.17.1. Declaration-Site Variance</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nonnullish-type-parameter">17.17.2. NonNullish Type Parameter</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="18_stdlib.html">18. Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="19_grammar.html">19. Grammar Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="20_implementation.html">20. Implementation Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="21_TS_compatibility.html">21. ArkTS-TypeScript compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="0_authors.html">22. Contributors</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="16_gui.html" title="previous chapter"><span class="section-number">16. </span>Support for GUI Programming</a></li>
      <li>Next: <a href="18_stdlib.html" title="next chapter"><span class="section-number">18. </span>Standard Library</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021-2023 Huawei Device Co., Ltd..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/17_experimental.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>